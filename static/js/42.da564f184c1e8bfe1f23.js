webpackJsonp([42],{Pzcu:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("aFK5"),a=i.n(s),o=i("mvHQ"),n=i.n(o),r=i("UBjx"),l=i("bh5B"),d=i("TbTt"),c=i("ZvpS"),u=i("Fwkz"),p=i("GyW3"),h=i("e66H"),f=i("odqc"),m=i("Znkm"),g=i("63CM"),v=i.n(g),w=i("HD9R"),M=i("kNDc"),_=i("LgOF"),b=i("S8Wg"),x=i("rGqP"),k=i("YxJB"),C=i("3Lt7"),D=i("Msp2"),S=i("62KO"),T={data:function(){return{contentHTML:"",showMap:!1,menusMap:{},showGaoDei:!1,titleMap:"操作提示",storeFoodList:[],selectAtlas:[],latitude:"",longitude:"",address:"",showCancel:!0,styles:{}}},directives:{TransferDom:v.a},components:{VHeader:r.a,Scroll:l.a,Rater:h.a,Tab:f.a,TabItem:m.a,Popup:w.a,Slider:d.a,Grid:M.a,GridItem:_.a,Scroller:b.a,Divider:x.a,Flexbox:k.a,FlexboxItem:C.a,Actionsheet:D.a,Confirm:S.a,Previewer:c.a,isIOS:p.b,isIphoneX:p.c},mounted:function(){this.$refs.scroll.$el.style.height=window.innerHeight-this.$refs.scroll.$el.offsetTop+"px"},created:function(){this.isMarginTop(),this.pageNum=1,this.pageSize=10,this.getStoreFood(!0),this._getDetail()},methods:{isMarginTop:function(){Object(p.c)()?this.styles.marginTop="70px":this.styles.marginTop="60px"},back:function(){this.$router.go(-1)},getStoreFood:function(t){var e=this;u.a.get(this,"/v1/storeFood",{categoryId:this.$route.params.id,pageNum:this.pageNum,pageSize:this.pageSize},function(i){i.forEach(function(t){t.storeUrl.split(";").length>0&&(t.imgUrl=t.storeUrl.split(";")[0])}),t?e.storeFoodList=i:(0===i.length?(e.$vux.toast.text("没有更多数据了","middle"),e.$refs.scroll&&e.pageNum>0?e.$refs.scroll.hiddenPullUpLoad():e.$refs.scroll.hiddenPullDown()):e.pageNum>1?e.storeFoodList=e.storeFoodList.concat(i):e.storeFoodList=i,console.log("描述详情页面"+n()(i)))})},onPullingUp:function(){this.pageNum++,this.getStoreFood()},_getDetail:function(){var t=this;u.a.get(this,"/v1/contentDesc/"+this.$route.params.contentId,null,function(e){t.contentHTML=e.contentHtml})},goToMap:function(t,e,i){if(Object(p.b)())window.webkit.messageHandlers.NativeMethod.postMessage({methodName:"openMapNavi",latitude:t,longitude:e});else{if(this.menusMap=JSON.parse(window.android.isInstallByread()),null==this.menusMap||1===a()(this.menusMap).length)return this.showCancel=!1,void(this.showGaoDei=!0);"2"===this.menusMap.baiDu&&(this.menusMap.baiDu="百度地图"),"1"===this.menusMap.gaoDei&&(this.menusMap.gaoDei="高德地图"),"3"===this.menusMap.tenXun&&(this.menusMap.tenXun="腾讯地图"),this.showMap=!0,this.latitude=t,this.longitude=e,this.address=i}},handleClickMenu:function(t){"baiDu"===t?window.android.makeUpMap(this.latitude,this.longitude,this.address,2,1,""):"gaoDei"===t?window.android.makeUpMap(this.latitude,this.longitude,this.address,1,1,""):"tenXun"===t&&window.android.makeUpMap(this.latitude,this.longitude,this.address,3,1,"")},onCancel:function(){},onConfirmGaoDei:function(){window.android.makeUpMap(this.latitude,this.longitude,this.address,0,1,"")},clickImg:function(t,e){var i=this;this.$vux.loading.show({text:"加载中...",position:"absolute"});var s=[];t.forEach(function(t,e){s.push({src:t})}),this.selectAtlas=s,this.$nextTick(function(){i.$refs.previewer.show(e)})},preImgLoaded:function(){this.$vux.loading.hide()},handleStoreDescribe:function(t){void 0!==t&&this.$router.push("/address/storeDescribe/"+t)},getRefresh:function(){this.getStoreFood(!0)}},watch:{}},F={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:""}},[i("div",{staticClass:"food-describe"},[i("v-header",{attrs:{title:"美食概况",fixed:!0}}),t._v(" "),i("scroll",{ref:"scroll",staticStyle:{overflow:"hidden"},attrs:{bounce:!1,probeType:3,listenScroll:!0,data:t.storeFoodList,scrollbar:!1,pullDownRefresh:!1,pullUpLoad:!0},on:{pullingUp:t.onPullingUp}},[i("div",[i("div",{staticClass:"food",style:t.styles},[i("span",[t._v("美食概况")])]),t._v(" "),i("div",{staticClass:"foodAll",domProps:{innerHTML:t._s(t.contentHTML)}}),t._v(" "),0===t.storeFoodList.length?i("div",{staticStyle:{"text-align":"center","margin-top":"25%"},on:{click:function(e){t.getRefresh()}}},[i("h4",[t._v("喔噢~，没有数据")]),t._v(" "),i("p",{staticStyle:{"margin-top":"7px"}},[t._v("点击刷新")])]):t._e(),t._v(" "),t._l(t.storeFoodList,function(e){return i("div",{key:e.id,staticClass:"contentWrapper"},[i("flexbox",[i("flexbox-item",{attrs:{span:.6}},[i("div",{staticClass:"flex-demo introduceWrapper"},[i("div",{staticClass:"introduceTitle",on:{click:function(i){t.handleStoreDescribe(e.contentId)}}},[i("strong",[t._v(t._s(e.name))])]),t._v(" "),i("div",{staticClass:"introduce"},[i("span",[t._v(t._s(e.feature))])]),t._v(" "),i("div",{staticClass:"introducePosition",on:{click:function(i){t.goToMap(e.latitude,e.longitude,e.address)}}},[i("i",{staticClass:"fa fa-map-marker",attrs:{"aria-hidden":"true"}}),i("span",[t._v(" "+t._s(e.address))])]),t._v(" "),i("hr",{staticClass:"hrWrapper"})])]),t._v(" "),i("flexbox-item",{attrs:{span:.4}},[i("div",{staticClass:"flex-demo imgWrapper"},[i("div",{staticStyle:{height:"95px"},style:{backgroundImage:"url("+e.imgUrl+")"},on:{click:function(i){t.clickImg(e.storeUrl.split(";"),0)}}})])])],1),t._v(" "),i("div",{staticClass:"detailWrapper",on:{click:function(i){t.clickImg(e.storeUrl.split(";"),0)}}},[i("span",[t._v("查看美食详情，"+t._s(e.storeUrl.split(";").length)+"张图片 ")]),i("i",{staticClass:"fa fa-angle-right",attrs:{"aria-hidden":"true"}})])],1)})],2)]),t._v(" "),i("actionsheet",{attrs:{menus:t.menusMap,"show-cancel":t.showCancel},on:{"on-click-menu":t.handleClickMenu},model:{value:t.showMap,callback:function(e){t.showMap=e},expression:"showMap"}}),t._v(" "),i("div",{staticClass:"alertWrapper"},[i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[i("confirm",{attrs:{title:t.titleMap},on:{"on-cancel":t.onCancel,"on-confirm":t.onConfirmGaoDei},model:{value:t.showGaoDei,callback:function(e){t.showGaoDei=e},expression:"showGaoDei"}},[i("p",{staticStyle:{"text-align":"center"}},[t._v("您尚未安装常用地图，小嗨为您推荐安装高德地图")])])],1)]),t._v(" "),i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[i("previewer",{ref:"previewer",attrs:{list:t.selectAtlas},on:{imgLoaded:t.preImgLoaded}})],1)],1)])},staticRenderFns:[]};var L=i("VU/8")(T,F,!1,function(t){i("lwTt")},"data-v-2ee5a8ab",null);e.default=L.exports},lwTt:function(t,e){}});
//# sourceMappingURL=42.da564f184c1e8bfe1f23.js.map