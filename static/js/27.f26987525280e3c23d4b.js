webpackJsonp([27],{"3xN2":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Faxw"),i=a("Fwkz"),n=a("kMOI"),c={data:function(){return{hotTags:[],myTags:[],matchTags:[],macthTop:0,showMatch:!1}},mounted:function(){this.macthTop=this.$refs.header.$el.clientHeight},components:{SearchHeader:s.a},created:function(){this._getHotTag(),this.myTags=n.a.get()||[]},methods:{back:function(){this.$router.go(-1)},_getHotTag:function(){var t=this;i.a.get(this,"/v1/tag",{hotTag:1,pageSize:10},function(e){t.hotTags=e})},search:function(t){var e=this;this.showMatch=!0,i.a.get(this,"/v1/tag",{pageSize:10,name:t},function(t){e.matchTags=t})},removeSearch:function(){this.showMatch=!1},selectTag:function(t){this.$parent.tags.findIndex(function(e){return e.id===t.id})<0&&this.$parent.tags.push({id:t.id,name:t.name}),this.$router.go(-1)},toDeleteTag:function(t){this.longTouch&&this.clearLongTouch();var e=this;this.longTouch=setTimeout(function(){n.a.remove(t.id),e.myTags=n.a.get()||[]},1500)},clearLongTouch:function(){clearInterval(this.longTouch)},removeAllTag:function(){n.a.removeAll(),this.myTags=n.a.get()||[]}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select-tag-wrapper"},[a("search-header",{ref:"header",attrs:{searchPlaceHolder:"搜索标签"},on:{submitSearch:t.search,removeSearch:t.removeSearch}}),t._v(" "),a("div",{staticClass:"group",staticStyle:{"margin-top":"15px"}},[a("div",{staticClass:"title"},[t._v("热门标签")]),t._v(" "),a("div",{staticClass:"content"},t._l(t.hotTags,function(e){return a("p",{key:e.id,staticClass:"tag",on:{click:function(a){t.selectTag(e)}}},[t._v("#"+t._s(e.name)+"#")])}))]),t._v(" "),a("div",{staticClass:"group",staticStyle:{"margin-top":"35px"}},[a("div",{staticClass:"title"},[t._m(0),t._v(" "),a("div",{on:{click:t.removeAllTag}},[a("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])]),t._v(" "),a("div",{staticClass:"content"},t._l(t.myTags,function(e){return a("p",{key:e.id,staticClass:"tag",on:{click:function(a){t.selectTag(e)},touchstart:function(a){t.toDeleteTag(e)},touchend:t.clearLongTouch}},[t._v("#"+t._s(e.name)+"#")])}))]),t._v(" "),t.showMatch?a("ul",{staticClass:"macth",style:{top:t.macthTop+"px"}},t._l(t.matchTags,function(e){return a("li",{key:e.id,on:{click:function(a){t.selectTag(e)}}},[t._v(t._s(e.name))])})):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._v("常用标签"),e("span",{staticStyle:{color:"#e54141","font-size":"13px","margin-left":"5px"}},[this._v("(长按删除)")])])}]};var r=a("VU/8")(c,o,!1,function(t){a("69bs")},"data-v-a65e61f0",null);e.default=r.exports},"69bs":function(t,e){}});
//# sourceMappingURL=27.f26987525280e3c23d4b.js.map