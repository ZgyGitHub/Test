webpackJsonp([45],{Jqpd:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("UBjx"),i=e("Faxw"),n=e("bh5B"),r=e("63CM"),l=e("HD9R"),o=e("EhXH"),c=e.n(o),p=e("GyW3"),h=e("kMOI"),u=e("Fwkz"),d=e("EdC7"),v=e.n(d),m={name:"strategyList",data:function(){return{showSearch:!1,showSelectType:!1,defaultAvatar:v.a,seachValue:"",searchList:[],travelsList:[]}},directives:{TransferDom:r.a},components:{VHeader:a.a,Scroll:n.a,Popup:l.a,SearchHeader:i.a},created:function(){this.paddingTop=20,this.paddingBottom=0,Object(p.c)()&&(this.paddingTop=34,this.paddingBottom=20),this.pageNum=1,c.a.registerAnimation({name:"rotateOut",animation:[{transform:"translate(-50%, 0)"},{transform:"translate(-50%, "+(this.paddingBottom+100)+"px)"}],presets:{duration:800,resetWhenDone:!0}}),c.a.registerAnimation({name:"rotateIn",animation:[{transform:"translate(-50%, "+(this.paddingBottom+100)+"px)"},{transform:"translate(-50%, 0)"}],presets:{duration:800,resetWhenDone:!0}}),this._getPlayStrategList()},mounted:function(){this.$refs.scroll.$el.style.height=window.innerHeight-this.$refs.header.$el.clientHeight+"px"},methods:{_getPlayStrategList:function(){var t=this;u.a.get(this,"/v1/playStrategy",{pageNum:this.pageNum},function(s){console.log(s),0!==s.length?t.pageNum<=1?t.travelsList=s:t.travelsList=t.travelsList.concat(s):t.pageNum>0?t.$refs.scroll&&(t.pageNum--,t.$refs.scroll.hiddenPullUpLoad()):t.$refs.scroll.hiddenPullDown()})},scroll:function(t,s){var e=this;this.showPlus&&s>0?c.a.runAnimation(this.$refs.plus,"rotateOut",function(){e.showPlus=!1}):!this.showPlus&&s<0&&c.a.runAnimation(this.$refs.plus,"rotateIn",function(){e.showPlus=!0})},onPullingDown:function(){this.pageNum=1,this._getPlayStrategList()},onPullingUp:function(){this.pageNum++,this._getPlayStrategList()},toDetail:function(t){this.$router.push("/address/playStrategy/"+t)},submitSearch:function(t){var s=this;u.a.get(this,"/v1/playStrategy",{title:t},function(t){s.searchList=t})},clickSearchItem:function(t){this.toDetail(t.id),this.showSearch=!1,this.seachValue="",this.searchList=[]},sendDynamic:function(t){null!=h.b.get()?(this.showSelectType=!1,this.$router.push("/address/travelsEdit/"+t)):this.$router.push("/user/login")}}},g={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("transition",{attrs:{name:"slideInRight"}},[e("div",{staticClass:"playStrategyList-wrapper"},[e("v-header",{ref:"header",attrs:{title:"看游记/攻略"}},[e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-search-strong",staticStyle:{fill:"#fff"},attrs:{slot:"right",type:"ios-search-strong",size:"28",xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 512 512"},on:{click:function(s){t.showSearch=!0}},slot:"right"},[e("path",{attrs:{d:"M344.5 298c15-23.6 23.8-51.6 23.8-81.7 0-84.1-68.1-152.3-152.1-152.3C132.1 64 64 132.2 64 216.3c0 84.1 68.1 152.3 152.1 152.3 30.5 0 58.9-9 82.7-24.4l6.9-4.8L414.3 448l33.7-34.3-108.5-108.6 5-7.1zm-43.1-166.8c22.7 22.7 35.2 52.9 35.2 85s-12.5 62.3-35.2 85c-22.7 22.7-52.9 35.2-85 35.2s-62.3-12.5-85-35.2c-22.7-22.7-35.2-52.9-35.2-85s12.5-62.3 35.2-85c22.7-22.7 52.9-35.2 85-35.2s62.3 12.5 85 35.2z"}})])]),t._v(" "),e("scroll",{ref:"scroll",staticStyle:{overflow:"hidden"},attrs:{data:t.travelsList,bounce:!1,probeType:3,listenScroll:!0,pullDownRefresh:!0,pullUpLoad:!0},on:{scroll:t.scroll,pullingDown:t.onPullingDown,pullingUp:t.onPullingUp}},[e("div",{staticClass:"travels"},t._l(t.travelsList,function(s){return e("div",{key:s.id,staticClass:"item",on:{click:function(e){t.toDetail(s.id)}}},[e("div",{staticClass:"travels-top"},[e("div",{staticStyle:{width:"48.5%"}},[e("p",{staticClass:"title"},[t._v(t._s(s.title))]),t._v(" "),0==s.articleType?e("p",{staticClass:"desc"},[t._v(t._s(s.intro))]):e("div",{staticClass:"people"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.userHeadUrl,expression:"item.userHeadUrl"}],staticClass:"avatar"}),t._v(" "),e("span",{staticClass:"nickname"},[t._v(t._s(s.userName))]),t._v(" "),e("span",{staticStyle:{"max-width":"55px",overflow:"hidden"}},[t._v("在\n                  "),e("b",[t._v(t._s(s.addressName))])])])]),t._v(" "),e("div",{directives:[{name:"lazy",rawName:"v-lazy:backgroundImage",value:s.firstImg,expression:"item.firstImg",arg:"backgroundImage"}],staticClass:"img",staticStyle:{width:"48.5%"}})]),t._v(" "),e("div",{staticClass:"travels-bottom"},[e("p",{staticClass:"travels-type",class:{primary:0==s.articleType}},[t._v(t._s(0==s.articleType?"游记":"攻略"))]),t._v(" "),e("p",[e("b",[t._v(t._s(s.browseCount))]),t._v(" 浏览\n              "),e("b",[t._v("·")]),t._v(" "),0==s.articleType?[e("b",[t._v(t._s(s.commentCount))]),t._v(" 评论\n              ")]:[e("b",[t._v(t._s(s.collectionSum))]),t._v(" 收藏\n              ")]],2)])])}))]),t._v(" "),e("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[e("popup",{staticClass:"popup-wrapper",attrs:{position:"right",width:"100%"},model:{value:t.showSearch,callback:function(s){t.showSearch=s},expression:"showSearch"}},[e("div",[e("search-header",{attrs:{searchPlaceHolder:"搜索游记/攻略..."},on:{submitSearch:t.submitSearch,removeSearch:function(s){t.searchList=[]}},model:{value:t.seachValue,callback:function(s){t.seachValue=s},expression:"seachValue"}},[e("p",{attrs:{slot:"button"},on:{click:function(s){t.showSearch=!1}},slot:"button"},[t._v("取消")])]),t._v(" "),e("ul",{staticClass:"search-list"},t._l(t.searchList,function(s){return e("li",{key:s.id,on:{click:function(e){t.clickSearchItem(s)}}},[e("p",{staticClass:"name"},[t._v(t._s(s.title))]),t._v(" "),e("p",{staticClass:"travels-type",class:{primary:0==s.articleType}},[t._v(t._s(0==s.articleType?"游记":"攻略"))])])})),t._v(" "),0===t.searchList.length?e("h4",{staticStyle:{"text-align":"center","margin-top":"30%"}},[t._v("喔噢~没有数据")]):t._e()],1)])],1),t._v(" "),e("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[e("popup",{staticClass:"popup-wrapper",attrs:{position:"top",width:"100%"},model:{value:t.showSelectType,callback:function(s){t.showSelectType=s},expression:"showSelectType"}},[e("div",{staticClass:"select-type"},[e("div",{staticStyle:{background:"#333"},style:{height:t.paddingTop+10+"px"}}),t._v(" "),e("div",{staticStyle:{background:"#fff","padding-bottom":"20px"}},[e("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[e("i",{staticClass:"fa fa-times",staticStyle:{"font-size":"21px",padding:"5px",color:"#555",margin:"3px 10px 3px"},attrs:{"aria-hidden":"true"},on:{click:function(s){t.showSelectType=!1}}})]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"item",on:{click:function(s){t.sendDynamic(0)}}},[e("img",{attrs:{src:t.defaultAvatar}}),t._v(" "),e("p",[t._v("游记")])]),t._v(" "),e("div",{staticClass:"item"},[e("img",{attrs:{src:t.defaultAvatar},on:{click:function(s){t.sendDynamic(1)}}}),t._v(" "),e("p",[t._v("攻略")])])])])])])],1),t._v(" "),e("div",{ref:"plus",staticClass:"plus",style:{bottom:t.paddingBottom+50+"px"},on:{click:function(s){t.showSelectType=!0}}},[e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-plus-empty icon",attrs:{type:"ios-plus-empty",size:"32",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 512 512"}},[e("path",{attrs:{d:"M384 265H264v119h-17V265H128v-17h119V128h17v120h120v17z"}})])])],1)])},staticRenderFns:[]};var f=e("VU/8")(m,g,!1,function(t){e("ZHb6")},"data-v-07861707",null);s.default=f.exports},ZHb6:function(t,s){}});
//# sourceMappingURL=45.56305faf8e807191cf18.js.map