webpackJsonp([30],{MVm4:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("rGqP"),i=s("UBjx"),o=s("Fwkz"),d=s("GyW3"),n=s("kMOI"),r=s("NC6I"),l=s.n(r),c=60,v={data:function(){return{clickBack:!1,title:"找回密码(验证手机号)",phone:"",validateCode:"",validateName:"获取验证码",password:"",rePassword:"",submitPhone:!1}},components:{VHeader:i.a,Divider:a.a},created:function(){},methods:{beforeLeave:function(t){Object(d.b)()&&!this.clickBack&&(t.style.display="none")},setTimeDown:function(){if(0===c)return this.validateDisabled=!1,this.validateName="重新获取",void(c=60);this.validateDisabled=!0,this.validateName="重新发送("+c+")",c--;var t=this;setTimeout(function(){t.setTimeDown()},1e3)},getValidate:function(){if(!this.validateDisabled)if(/^1[34578]\d{9}$/.test(this.phone)){if(c>=60){var t=this;o.a.get(t,"/v1/sms/"+this.phone,null,function(e){t.$vux.toast.show("发送验证码成功","middle")})}this.setTimeDown()}else this.$vux.toast.text("手机号码格式不正确","middle")},blurPassword:function(t){/^([\d]|[\w]){6,16}$/.test(this.password)||this.$vux.toast.text("密码长度为6到16位并且只包含数字字母下划线","middle")},confirmPhone:function(){if(""!==this.phone)if(/^1[34578]\d{9}$/.test(this.phone))if(6===this.validateCode.length){var t=this;o.a.post(t,"/v1/sms/"+this.phone+"/"+this.validateCode,null,function(e){t.submitPhone=!0,t.title="重置密码"})}else this.$vux.toast.text("验证码格式不正确","middle");else this.$vux.toast.text("手机号码格式不正确","middle");else this.$vux.toast.text("手机号码不能为空","middle")},confirmPassword:function(){var t=this;if(""!==this.password&&""!==this.rePassword)if(this.password===this.rePassword)if(/^([\d]|[\w]){6,16}$/.test(this.password)){var e=this;o.a.post(e,"/v1/resetPassword",{phone:e.phone,password:e.password},function(s){t.$vux.toast.text("重置密码成功","middle"),e.$store.commit("SET_LOGIN_ANMATION",""),e.$router.replace("/user");var a=t.$store.getters.JIM;a&&a.updateSelfPwd({old_pwd:n.b.get("password"),new_pwd:l()(e.password),is_md5:!0}).onSuccess(function(){n.b.setItem("password",l()(e.password))})})}else this.$vux.toast.text("密码长度为6到16位并且只包含数字字母下划线","middle");else this.$vux.toast.text("两次输入的密码不一致","middle");else this.$vux.toast.text("请输入密码再提交","middle")}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide"},on:{"before-leave":t.beforeLeave}},[s("div",{staticClass:"reset-register-wrapper"},[s("v-header",{attrs:{title:t.title},on:{back:function(e){t.clickBack=!0}}}),t._v(" "),t.submitPhone?s("div",{staticClass:"form"},[s("div",{staticClass:"around"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"请输入6~16位密码"},domProps:{value:t.password},on:{blur:t.blurPassword,input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"around"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.rePassword,expression:"rePassword"}],attrs:{type:"password",placeholder:"再次输入上面的密码"},domProps:{value:t.rePassword},on:{input:function(e){e.target.composing||(t.rePassword=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"around",staticStyle:{"background-color":"#b9b9b9",margin:"25px auto"}},[s("button",{staticClass:"btn",on:{click:t.confirmPassword}},[t._v("重置密码")])])]):s("div",{staticClass:"form"},[s("div",{staticClass:"around"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{pattern:"[0-9]*",placeholder:"输入手机号"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"around validate-code"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.validateCode,expression:"validateCode"}],attrs:{placeholder:"输入验证码"},domProps:{value:t.validateCode},on:{input:function(e){e.target.composing||(t.validateCode=e.target.value)}}}),t._v(" "),s("div",{staticClass:"code",on:{click:t.getValidate}},[t._v("\n          "+t._s(t.validateName)+"\n        ")])]),t._v(" "),s("div",{staticClass:"around",staticStyle:{"background-color":"#b9b9b9",margin:"25px auto"}},[s("button",{staticClass:"btn",on:{click:t.confirmPhone}},[t._v("下一步")])])]),t._v(" "),s("div",{staticClass:"third-login"},[s("divider",[t._v("其他账号登录")]),t._v(" "),s("div",{staticStyle:{display:"flex","justify-content":"space-around","margin-top":"15px"}},[s("div",{staticClass:"item"},[s("div",{staticClass:"icon"},[s("i",{staticClass:"fa fa-weixin",attrs:{"aria-hidden":"true"}})]),t._v(" "),s("p",[t._v("微信登录")])])])],1)],1)])},staticRenderFns:[]};var p=s("VU/8")(v,u,!1,function(t){s("tTAf")},"data-v-9a8d3bfc",null);e.default=p.exports},tTAf:function(t,e){}});
//# sourceMappingURL=30.3971ffd817904eb64427.js.map