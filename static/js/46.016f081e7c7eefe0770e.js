webpackJsonp([46],{"+GdG":function(t,e){},r176:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("UBjx"),a=i("Faxw"),r=i("bh5B"),n=i("TbTt"),o=i("gCE8"),l=i("d0Tq"),c=i("63CM"),h=i.n(c),p=i("HD9R"),d=i("S8Wg"),u=i("/0UN"),g=i("hGvq"),v=i("Fwkz"),m=i("5i88"),f=i.n(m),y=i("MdvP"),_=i.n(y),b=i("GyW3"),S={name:"strategyList",data:function(){return{icon:_.a,bannerList:f.a,headerOpacity:0,tagWidth:350,showSearch:!1,seachValue:"",searchList:[],hotTags:[{id:"",name:"全部"}],currentTag:"",strategList:[],filter:{between:[0,5e4],days:"~"},tempFilter:{between:[0,5e4],days:"~"},fitCount:0,otherSort:{value:"readCount",type:"DESC",label:"综合排序"},sortType:[{value:"readCount",type:"DESC",label:"综合排序"},{value:"price",type:"ASC",label:"价格低→高"},{value:"price",type:"DESC",label:"价格高→低"},{value:"days",type:"ASC",label:"出行天数低→高"},{value:"days",type:"DESC",label:"出行天数高→低"}],daysList:[{value:"~1",label:"一日游"},{value:"2~3",label:"1~3天"},{value:"4~7",label:"4~7天"},{value:"8~",label:"7天以上"}],showSort:!1,showFilter:!1}},directives:{TransferDom:h.a},components:{VHeader:s.a,Scroll:r.a,Popup:p.a,Slider:n.a,Scroller:d.a,IndexList:o.a,Range:l.a,Checker:u.a,CheckerItem:g.a,SearchHeader:a.a},mounted:function(){this.$refs.scroll.$el.style.height=window.innerHeight-this.$refs.scroll.$el.offsetTop+"px"},activated:function(){this._getStrategList()},created:function(){this.paddingBottom=0,Object(b.c)()&&(this.paddingBottom=20),this._getBanner(),this._getStrategList(),this._getHotTags()},methods:{_getBanner:function(){var t=this;v.a.get(this,"/v1/banner/4",null,function(e){e.forEach(function(t){t.thumbUrl+="-banner"}),t.bannerList=e},null,!1)},_getStrategList:function(){var t=this;v.a.get(this,"/v1/tourismStrategyExtra",{tourismId:this.$route.params.strategyId,sortName:this.otherSort.value,sortType:this.otherSort.type,minPrice:this.filter.between[0],maxPrice:this.filter.between[1]>=5e4?"":this.filter.between[1],minDays:this.filter.days.split("~")[0],maxDays:this.filter.days.split("~")[1],tagIds:this.currentTag},function(e){t.strategList=e})},_getHotTags:function(){var t=this;v.a.get(this,"/v1/tag",{type:6,pageSize:12},function(e){e.splice(0,0,{id:"",name:"全部"}),t.hotTags=e,e.length>0&&(t.currentTag=e[0].id),setTimeout(function(){for(var e=0,i=0;i<t.$refs.tagWrapper.children.length;i++){e+=t.$refs.tagWrapper.children[i].offsetWidth+12}t.tagWidth=e},50)})},_getStrategyNum:function(){var t=this;v.a.get(this,"/v1/tourismStrategyExtraCount",{tourismId:this.$route.params.strategyId,minDays:this.tempFilter.days.split("~")[0],maxDays:this.tempFilter.days.split("~")[1],minPrice:this.tempFilter.between[0],maxPrice:this.tempFilter.between[1]>=5e4?"":this.tempFilter.between[1]},function(e){t.fitCount=e})},scroll:function(t){t.y<=-128?this.headerOpacity=1:this.headerOpacity=Math.abs(t.y/188)},clickTag:function(t){this.currentTag=t,this._getStrategList()},clickItem:function(t,e,i){t&&(null!=i&&v.a.put(this,"/v1/tourismStrategyExtra/readCount/"+i),this.$router.push("/content/"+t+"/"+e))},clickSortType:function(t){this.otherSort=t,this._getStrategList(),this.showSort=!1},filterPriceResult:function(){this.filter=this.tempFilter,this._getStrategList(),this.showFilter=!1},toShowFilter:function(){this.showFilter=!0,this._getStrategyNum(),this.resetFilter()},resetFilter:function(){this.tempFilter={between:this.filter.between,days:this.filter.days}},priceChange:function(t){this.tempFilter.between=t,this._getStrategyNum()},submitSearch:function(t){var e=this;v.a.get(this,"/v1/tourismStrategyExtra",{tourismId:this.$route.params.strategyId,name:t,pageSize:10},function(t){e.searchList=t})},clickSearchItem:function(t){this.clickItem(t.contentId,t.name,t.id),this.showSearch=!1,this.seachValue="",this.searchList=[]}}},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slideInRight"}},[i("div",{staticClass:"strategy-list-wrapper"},[i("v-header",{attrs:{title:"攻略列表",opacity:t.headerOpacity,fixed:!0}},[i("svg",{staticClass:"vux-x-icon vux-x-icon-ios-search-strong",staticStyle:{fill:"#fff"},attrs:{slot:"right",type:"ios-search-strong",size:"28",xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 512 512"},on:{click:function(e){t.showSearch=!0}},slot:"right"},[i("path",{attrs:{d:"M344.5 298c15-23.6 23.8-51.6 23.8-81.7 0-84.1-68.1-152.3-152.1-152.3C132.1 64 64 132.2 64 216.3c0 84.1 68.1 152.3 152.1 152.3 30.5 0 58.9-9 82.7-24.4l6.9-4.8L414.3 448l33.7-34.3-108.5-108.6 5-7.1zm-43.1-166.8c22.7 22.7 35.2 52.9 35.2 85s-12.5 62.3-35.2 85c-22.7 22.7-52.9 35.2-85 35.2s-62.3-12.5-85-35.2c-22.7-22.7-35.2-52.9-35.2-85s12.5-62.3 35.2-85c22.7-22.7 52.9-35.2 85-35.2s62.3 12.5 85 35.2z"}})])]),t._v(" "),i("scroll",{ref:"scroll",staticStyle:{overflow:"hidden"},attrs:{data:t.strategList,bounce:!1,probeType:3,listenScroll:!0},on:{scroll:t.scroll}},[i("div",[i("slider",{attrs:{list:t.bannerList}},t._l(t.bannerList,function(e){return i("div",{key:e.id,on:{click:function(i){t.clickItem(e.contentId,"攻略详情")}}},[i("img",{attrs:{src:e.thumbUrl,width:"100%",height:"188px"}})])})),t._v(" "),i("div",{staticClass:"strategy-list"},[i("scroll",{staticStyle:{width:"100%"},attrs:{data:t.hotTags,direction:"horizontal",scrollbar:!0}},[i("div",{ref:"tagWrapper",staticStyle:{overflow:"hidden",height:"40px"},style:{width:t.tagWidth+"px"},attrs:{slot:"content"},slot:"content"},t._l(t.hotTags,function(e){return i("p",{key:e.id,staticClass:"tag-item",class:{active:e.id===t.currentTag},on:{click:function(i){i.stopPropagation(),t.clickTag(e.id)}}},[t._v(t._s(e.name))])}))]),t._v(" "),t._l(t.strategList,function(e){return i("div",{key:e.id,staticClass:"strategy-item",on:{click:function(i){t.clickItem(e.contentId,e.name,e.id)}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumbUrl,expression:"strategy.thumbUrl"}],attrs:{width:"100%",height:"138px"}}),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"title"},[i("p",{staticClass:"t"},[t._v(t._s(e.name))]),t._v(" "),i("p",[t._v("参考价:"),i("b",{staticClass:"price"},[t._v("￥"+t._s(e.price))])])]),t._v(" "),i("p",{staticClass:"desc"},[t._v(t._s(e.desc))]),t._v(" "),i("div",{staticClass:"bottom"},[i("p",[i("i",{staticClass:"fa fa-clock-o",staticStyle:{"margin-right":"5px"},attrs:{"aria-hidden":"true"}}),t._v(t._s(e.createAt))]),t._v(" "),i("p",[i("i",{staticClass:"fa fa-users",staticStyle:{"margin-right":"5px"},attrs:{"aria-hidden":"true"}}),t._v(" "),i("b",[t._v(t._s(e.readCount)+"人")]),t._v("阅读过")])])])])}),t._v(" "),0===t.strategList.length?i("div",{staticStyle:{"text-align":"center","margin-top":"25%"},on:{click:function(e){t._getStrategList()}}},[i("h4",[t._v("喔噢~，没有数据")]),t._v(" "),i("p",{staticStyle:{"margin-top":"7px"}},[t._v("点击刷新")])]):t._e()],2)],1)]),t._v(" "),i("ul",{staticClass:"bottom-sort",style:{paddingBottom:t.paddingBottom+"px"}},[i("li",{on:{click:function(e){e.stopPropagation(),t.showSort=!t.showSort}}},[i("p",{class:{active:"rate"!==t.otherSort.value}},[t._v(t._s(t.otherSort.label))]),t._v(" "),i("img",{attrs:{src:t.icon.list}})]),t._v(" "),i("li",{on:{click:function(e){e.stopPropagation(),t.toShowFilter(e)}}},[i("p",{class:{active:"~"!==t.filter.days||t.filter.between[0]>0||t.filter.between[1]<5e4}},[t._v("筛选条件")]),t._v(" "),i("img",{attrs:{src:t.icon.sort}}),t._v(" "),"~"!==t.filter.days||t.filter.between[0]>0||t.filter.between[1]<5e4?i("div",{staticClass:"dot"}):t._e()])]),t._v(" "),i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[i("popup",{staticClass:"popup-wrapper",attrs:{position:"bottom",width:"100%"},on:{"on-hide":t.resetFilter},model:{value:t.showFilter,callback:function(e){t.showFilter=e},expression:"showFilter"}},[i("div",{staticStyle:{position:"relative",padding:"9px 12px 68px 12px",background:"#fff",color:"#333"},style:{paddingBottom:t.paddingBottom+68+"px"}},[i("div",{staticStyle:{"text-align":"center","border-bottom":"1px solid #E0E0E0","padding-bottom":"9px"}},[i("p",{staticStyle:{"font-size":"16px"}},[t._v("价格等级")]),t._v(" "),i("p",{staticStyle:{"font-size":"12px"}},[i("b",[t._v(t._s(t.fitCount))]),t._v("篇攻略符合条件")])]),t._v(" "),i("p",{staticStyle:{"font-size":"16px","margin-top":"20px"}},[t._v("\n            价格范围：\n            "),i("b",{staticStyle:{color:"red"}},[t._v("￥"+t._s(t.tempFilter.between[0])+" - "+t._s(t.tempFilter.between[1]))]),t._v(" "),i("span",{staticStyle:{"font-size":"12px"}},[t._v("元/间")])]),t._v(" "),i("range",{attrs:{step:1e4,max:5e4,customStops:["￥0","￥10000","￥20000","￥30000","￥40000","不限"],"show-stops":"",range:""},on:{"on-change":t.priceChange},model:{value:t.tempFilter.between,callback:function(e){t.$set(t.tempFilter,"between",e)},expression:"tempFilter.between"}}),t._v(" "),i("p",{staticStyle:{padding:"28px 0 6px"}},[t._v("出行天数")]),t._v(" "),i("checker",{attrs:{"default-item-class":"checker-item","selected-item-class":"checker-item-selected"},on:{"on-change":t._getStrategyNum},model:{value:t.tempFilter.days,callback:function(e){t.$set(t.tempFilter,"days",e)},expression:"tempFilter.days"}},t._l(t.daysList,function(e){return i("checker-item",{key:e.label,attrs:{value:e.value}},[t._v(t._s(e.label))])})),t._v(" "),i("div",{staticStyle:{position:"absolute",left:"0",bottom:"0",right:"0","box-shadow":"0 0 10px #e9e9e9",display:"flex","text-align":"center",height:"40px","line-height":"40px",background:"#F0F0F0"},style:{paddingBottom:t.paddingBottom+"px"}},[i("p",{staticStyle:{width:"40%",background:"#fff"},on:{click:t.resetFilter}},[t._v("重置筛选")]),t._v(" "),i("p",{staticStyle:{width:"60%",background:"#FFA004"},on:{click:t.filterPriceResult}},[t._v("显示结果")])])],1)])],1),t._v(" "),i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[i("popup",{staticClass:"popup-wrapper",attrs:{position:"bottom",width:"100%"},model:{value:t.showSort,callback:function(e){t.showSort=e},expression:"showSort"}},[i("ul",{staticStyle:{background:"#fff","font-size":"16px",padding:"0 25px","list-style":"none"},style:{paddingBottom:t.paddingBottom+"px"}},t._l(t.sortType,function(e){return i("li",{key:e.value+e.type,staticStyle:{padding:"12px 0","text-align":"center","border-bottom":"1px solid #f6f2f2"},style:{fontWeight:e.value===t.otherSort.value&&e.type===t.otherSort.type?"bold":"normal"},on:{click:function(i){t.clickSortType(e)}}},[t._v("\n            "+t._s(e.label)+"\n          ")])}))])],1),t._v(" "),i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[i("popup",{staticClass:"popup-wrapper",attrs:{position:"right",width:"100%"},model:{value:t.showSearch,callback:function(e){t.showSearch=e},expression:"showSearch"}},[i("div",[i("search-header",{attrs:{searchPlaceHolder:"搜索攻略..."},on:{submitSearch:t.submitSearch,removeSearch:function(e){t.searchList=[]}},model:{value:t.seachValue,callback:function(e){t.seachValue=e},expression:"seachValue"}},[i("p",{attrs:{slot:"button"},on:{click:function(e){t.showSearch=!1}},slot:"button"},[t._v("取消")])]),t._v(" "),i("ul",{staticClass:"search-list"},t._l(t.searchList,function(e){return i("li",{key:e.id,on:{click:function(i){t.clickSearchItem(e)}}},[i("p",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),i("p",{staticClass:"feature"},[t._v(t._s(e.desc))])])})),t._v(" "),0===t.searchList.length?i("h4",{staticStyle:{"text-align":"center","margin-top":"30%"}},[t._v("喔噢~没有数据")]):t._e()],1)])],1)],1)])},staticRenderFns:[]};var x=i("VU/8")(S,w,!1,function(t){i("+GdG")},"data-v-0fe34a46",null);e.default=x.exports}});
//# sourceMappingURL=46.016f081e7c7eefe0770e.js.map