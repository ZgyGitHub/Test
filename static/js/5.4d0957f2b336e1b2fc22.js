webpackJsonp([5],{"9Wyg":function(t,e){},FHri:function(t,e){},GSQ1:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAgCAYAAACVU7GwAAABjUlEQVRYR+2X61HCQBSFzyX7X+xAO8AKxArsQLMdxAqECrSDzdiBFQgVCBWoFZgClhwngWSWp7sMyYxj8osJl5uPs/dxInAumiiG4AmQvnv/+M/MQI5F588hOWQNKo2+Twfk/lt7LhqZL9gGlGLxQ4nt2n3fZJtxNGoCwTWIG9F24pungzqZUjQYIFJn3gnv7LSKbeT4aNQQgjdfoDLOqZ8aSvIE0pvtzLOwX6Lx6X53sKZocAGoNAgKNhGNEqCG+i0BqUUv6ue0VehzYM9IKLoTmElsryr2tqD2jgSm22Pob0LxRRXy+l8LO6+mt0/3BSt1su47MNGPgEIfUIm/TEWkTasWb0SpMJjt6A7KV8H/p1S5lHvq9qBCOaabnqkxpWjQh0QfXo6U9tJdrg1CrZwCUeyvPeOBMUTuwfzB9eNtQBXHM9x1hDRqBMEjiLFoOwrxU8HDc2U/lp6KZc10UEvTuMNG1PuvU8qp3E6plRhd9629zYSaPKbqHcDAd/M3Hke+Ck2UQcT7DbgNqB9upi7hr8od5AAAAABJRU5ErkJggg=="},XNI7:function(t,e,s){t.exports=s.p+"static/img/scenic.c3af43f.png"},oAcx:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),a=s.n(i),o=s("UBjx"),r=s("EdC7"),n=s.n(r),l=s("XNI7"),c=s.n(l),d=s("GSQ1"),u=s.n(d),x=s("odqc"),f=s("Znkm"),p=s("vtEK"),v=s("rGqP"),g=s("2sLL"),m=s("fBcm"),h=s("b+jt"),b=s("YxJB"),y=s("3Lt7"),S=s("62KO"),_=s("EmH9"),C=s("bh5B"),T=s("Fwkz"),k=s("kMOI"),A=s("NYxO"),w=s("PJh5"),D=s.n(w),N=s("75UI"),L={data:function(){return{imageTop:n.a,scenicImage:c.a,hotelImage:u.a,listOrder:["全部","待付款","已付款","已取消","已失效"],listOrders:[],index:0,scrollHeight:""}},mounted:function(){this.scrollHeight=window.innerHeight-64-44},created:function(){this.pageNum=1,this.pageSize=10,this.getWaitPayList(!0)},computed:a()({},Object(A.b)({selectTab:"orderTab"})),watch:{$route:function(t,e){"Order"===t.name&&(this.pageNum=1,this.getWaitPayList(!0))}},methods:a()({},Object(A.c)({setOrderTab:"SET_ORDER_TAB"}),{toOrderDesc:function(t){this.$router.push("/user/order/orderDesc/"+t)},getDaysByDateString:function(t,e){return Math.abs(D()(t).diff(D()(e),"days"))},getWaitPayList:function(t){var e=this,s="",i=k.b.get("id");if(null!=i){var a="";0===this.selectTab?s="":1===this.selectTab?(s=!1,a=0):2===this.selectTab?(s=!1,a=1):3===this.selectTab?(s=!1,a=2):4===this.selectTab&&(s=!0);T.a.get(this,"/v1/orders",{buyerId:i,orderStatus:a,pageNum:this.pageNum,pageSize:this.pageSize,expire:s},function(s){for(var i=0;i<s.length;i++){switch(0===s[i].type&&(s[i].liveNum=e.getDaysByDateString(s[i].effectiveDate.split("~")[0],s[i].effectiveDate.split("~")[1])),s[i].orderStatus){case 0:s[i].orderStatusDesc="待付款";break;case 1:s[i].orderStatusDesc="已付款";break;case 2:s[i].orderStatusDesc="已取消";break;case 3:s[i].orderStatusDesc="退款中";break;case 4:s[i].orderStatusDesc="已退款";break;case 5:s[i].orderStatusDesc="退款失败"}(D()().subtract(1,"days").isAfter(s[i].effectiveDate.split("~")[1])||D()().subtract(1,"days").isAfter(s[i].effectiveDate))&&(s[i].orderStatusDesc="已失效",s[i].expire=!0)}if(t)return e.listOrders=s,void e.$nextTick(function(){0===s.length||e.$refs.scroll.scroll.scrollTo(0,0)});0===s.length?(e.$vux.toast.text("没有更多数据了","middle"),e.$refs.scroll&&e.pageNum>1?e.$refs.scroll.hiddenPullUpLoad():e.$refs.scroll.hiddenPullDown()):e.pageNum>1?e.listOrders=e.listOrders.concat(s):e.listOrders=s})}},selectTabEvery:function(t){this.setOrderTab(t),this.pageNum=1,this.getWaitPayList(!0)},handleToEvaluation:function(t,e){sessionStorage.setItem("outTradeNo",e),this.$router.replace("/user/evalution/"+t)},toPay:function(t){var e=this;N.a.alipay(t,function(t){var s=t.arg,i=t.msg;9e3===s&&(e.$store.commit("SET_ORDER_TAB",2),e.getWaitPayList(!0)),e.$vux.toast.text(i,"middle")})},toCansel:function(t){var e=this;T.a.put(this,"/v1/order",{outTradeNo:t,orderStatus:2},function(t){e.$vux.toast.text("订单取消成功","middle"),e.getWaitPayList(!0)})},onPullingUp:function(){this.pageNum++,this.getWaitPayList()},onPullingDown:function(){this.pageNum=1,this.getWaitPayList()}}),components:{VHeader:o.a,Tab:x.a,TabItem:f.a,Sticky:p.a,Divider:v.a,XButton:g.a,Swiper:m.a,SwiperItem:h.a,Flexbox:b.a,FlexboxItem:y.a,Scroll:C.a,Confirm:S.a,CheckIcon:_.a}},E={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"order-wrapper"},[s("v-header",{attrs:{title:"我的订单"}}),t._v(" "),s("div",[s("tab",{attrs:{animate:!1,"line-width":2,"active-color":"#FFA004"}},t._l(t.listOrder,function(e,i){return s("tab-item",{key:i,staticClass:"vux-center",attrs:{selected:t.selectTab===i},on:{"on-item-click":t.selectTabEvery}},[t._v(t._s(e))])})),t._v(" "),s("scroll",{ref:"scroll",staticStyle:{overflow:"hidden"},style:{height:t.scrollHeight+"px"},attrs:{data:t.listOrders,scrollbar:!1,pullDownRefresh:!0,pullUpLoad:!0},on:{pullingDown:t.onPullingDown,pullingUp:t.onPullingUp}},[s("div",{staticClass:"tab-swiper vux-center"},[s("ul",t._l(t.listOrders,function(e,i){return s("li",{key:i,on:{click:function(s){t.toOrderDesc(e.outTradeNo)}}},[s("flexbox",{staticClass:"orderflexbox",attrs:{gutter:0}},[s("flexbox-item",{attrs:{span:2/3}},[s("div",{staticClass:"flex-demo",staticStyle:{"margin-left":"10px"}},[1==e.type?s("img",{staticStyle:{width:"15px",height:"15px","margin-right":"8px"},attrs:{slot:"icon",src:t.scenicImage},slot:"icon"}):t._e(),t._v(" "),0==e.type?s("img",{staticStyle:{width:"15px",height:"15px","margin-right":"8px"},attrs:{slot:"icon",src:t.hotelImage},slot:"icon"}):t._e(),t._v(" "),s("span",[t._v(t._s(0==e.type?"酒店":"景区"))])])]),t._v(" "),s("flexbox-item",{attrs:{span:1/3}},[s("div",{staticClass:"flex-demo",staticStyle:{"text-align":"right","margin-right":"20px"}},[s("span",{staticClass:"orderspan",staticStyle:{"padding-right":"5px",color:"#FFA004"}},[t._v(t._s(e.orderStatusDesc))])])])],1),t._v(" "),s("hr",{staticClass:"orderhr"}),t._v(" "),s("flexbox",{staticClass:"orderflexbox",attrs:{gutter:0}},[s("flexbox-item",{staticStyle:{"margin-left":"20px"},attrs:{span:1/6}},[s("div",{staticClass:"flex-demo"},[s("img",{staticClass:"imageWrapper",attrs:{src:e.thumbUrl,alt:""}})])]),t._v(" "),s("flexbox-item",{attrs:{span:5/6}},[s("div",{staticClass:"flex-demo"},[s("flexbox",{staticClass:"orderflexbox",attrs:{gutter:0}},[s("flexbox-item",[s("div",{staticClass:"flex-demo",staticStyle:{"padding-left":"17px","padding-right":"20px"}},[s("span",{},[t._v(t._s(e.goodsName))])])])],1),t._v(" "),s("flexbox",{staticClass:"orderflexbox orderflexboxthird",attrs:{gutter:0}},[s("flexbox-item",{attrs:{span:4/6}},[s("div",{staticClass:"flex-demo",staticStyle:{"margin-left":"17px"}},[s("span",{staticClass:"ordersmall"},[t._v(t._s(e.effectiveDate))])])])],1),t._v(" "),0==e.type?s("flexbox",{staticClass:"orderflexbox orderflexboxthird",attrs:{gutter:0}},[s("flexbox-item",[s("div",{staticClass:"flex-demo-o"},[s("span",{staticClass:"ordersmall"},[e.liveNum?s("span",[t._v(t._s(e.liveNum)+"晚")]):t._e(),t._v(" "+t._s(e.productNum)+"间")])])])],1):t._e(),t._v(" "),1==e.type?s("flexbox",{staticClass:"orderflexbox orderflexboxthird",attrs:{gutter:0}},[s("flexbox-item",[s("div",{staticClass:"flex-demo-o"},[s("span",{staticClass:"ordersmall"},[t._v(t._s(e.productNum)+"张")])])])],1):t._e()],1)])],1),t._v(" "),s("hr",{staticClass:"orderhr"}),t._v(" "),s("flexbox",{staticClass:"orderflexbox orderflexboxthird",attrs:{gutter:0}},[s("flexbox-item",[s("div",{staticClass:"flex-demo",staticStyle:{"margin-left":"20px","margin-top":"18px","text-align":"left"}},[s("span",{staticClass:"totalAmount"},[t._v("¥"+t._s(e.totalAmount))])])]),t._v(" "),0==e.orderStatus&&1!=e.expire?s("flexbox-item",[s("div",{staticClass:"flex-demo",staticStyle:{"margin-right":"20px","margin-top":"18px","text-align":"right"}},[s("button",{staticClass:"cancelButton",on:{click:function(s){s.stopPropagation(),t.toCansel(e.outTradeNo)}}},[t._v("取消订单")]),t._v(" "),s("button",{staticClass:"payButton",on:{click:function(s){s.stopPropagation(),t.toPay(e.outTradeNo)}}},[t._v("立即支付")])])]):t._e()],1),t._v(" "),1==e.orderStatus&&"已付款"===e.orderStatusDesc?s("flexbox",{staticClass:"orderflexbox orderflexboxthird",attrs:{gutter:0}},[s("flexbox-item",[s("div",{staticClass:"flex-demo",staticStyle:{"margin-right":"20px","margin-top":"-23px","text-align":"right"}},[0===e.commentStatus?s("button",{staticClass:"evalutionButton",on:{click:function(s){s.stopPropagation(),t.handleToEvaluation(e.productId,e.outTradeNo)}}},[t._v("评价晒单")]):t._e(),t._v(" "),1===e.commentStatus?s("button",{staticClass:"isEvalutionButton",class:{disabledCustom:!0},attrs:{disabled:"false"}},[t._v("已评价")]):t._e()])])],1):t._e()],1)})),t._v(" "),0===t.listOrders.length?s("div",{staticStyle:{"text-align":"center","margin-top":"25%"},on:{click:function(e){t.getWaitPayList(!0)}}},[s("h4",[t._v("喔噢~，没有数据")]),t._v(" "),s("p",{staticStyle:{"margin-top":"7px"}},[t._v("点击刷新")])]):t._e()])])],1),t._v(" "),s("router-view")],1)},staticRenderFns:[]};var O=s("VU/8")(L,E,!1,function(t){s("FHri")},"data-v-cb9d13fa",null);e.default=O.exports},vtEK:function(t,e,s){"use strict";var i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e.scrollBox||window,i=e.offset||0,a=!0===e.checkStickySupport||!1;"string"==typeof s&&(s=document.getElementById(s));var o=t.offsetTop-i;s.removeEventListener("scroll",s.e);var r,n=function(){return s===window?document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop:s.scrollTop},l=function(){n()>o?(t.style.top=i+"px",t.classList.add("vux-fixed")):t.classList.remove("vux-fixed")};if(a&&((r=window.navigator.userAgent.match(/(iPad|iPhone|iPod)\s+OS\s([\d_.]+)/))&&r[2]&&parseInt(r[2].replace(/_/g,"."),10)>=6||function(){for(var t=["","-webkit-","-ms-","-moz-","-o-"],e="",s=0;s<t.length;s++)e+="position:"+t[s]+"sticky";var i=document.createElement("div"),a=document.body;i.style.cssText="display:none"+e,a.appendChild(i);var o=/sticky/i.test(window.getComputedStyle(i).position);return a.removeChild(i),i=null,o}()))t.style.top=i+"px",t.classList.add("vux-sticky");else{if(t.classList.contains("vux-fixed"))n()<(o=function(t){for(var e=t.nextSibling;1!==e.nodeType;)e=e.nextSibling;return e.classList.contains("vux-sticky-fill")?e:t.parentNode}(t).offsetTop-i)&&t.classList.remove("vux-fixed");else o=t.offsetTop-i;s.e=l,s.addEventListener("scroll",l)}},a={name:"sticky",data:function(){return{initTimes:0}},created:function(){this.$vux&&this.$vux.bus&&this.$vux.bus.$on("vux:after-view-enter",this.bindSticky)},activated:function(){this.initTimes>0&&this.bindSticky(),this.initTimes++},mounted:function(){var t=this;this.$nextTick(function(){t.bindSticky()})},beforeDestroy:function(){this.$vux&&this.$vux.bus&&this.$vux.bus.$off("vux:after-view-enter",this.bindSticky)},methods:{bindSticky:function(){var t=this;this.$nextTick(function(){i(t.$el,{scrollBox:t.scrollBox,offset:t.offset,checkStickySupport:void 0===t.checkStickySupport||t.checkStickySupport})})}},props:["scrollBox","offset","checkStickySupport"]},o={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vux-sticky-box"},[this._t("default")],2)},staticRenderFns:[]};var r=s("VU/8")(a,o,!1,function(t){s("9Wyg")},null,null);e.a=r.exports}});
//# sourceMappingURL=5.4d0957f2b336e1b2fc22.js.map