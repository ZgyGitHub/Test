{"version":3,"sources":["webpack:///./src/assets/img/AI_avatar.png","webpack:///./src/components/tag-cloud/tag-cloud.vue","webpack:///./src/components/tag-cloud/tag-cloud.vue?4408","webpack:///./src/components/tag-cloud/tag-cloud.vue?ba35","webpack:///./src/components/chat/chatAI.vue","webpack:///./src/api/chatAIApi.js","webpack:///./src/components/chat/chatAI.vue?5534","webpack:///./src/components/chat/chatAI.vue?e5db","webpack:///./src/assets/json/chatIcon.json"],"names":["module","exports","__webpack_require__","p","tag_cloud","props","data","type","Array","default","config","Object","option","radius","maxFont","color","rotateAngleXbase","rotateAngleYbase","hover","tagList","created","this","assign_default","mounted","_initTags","beforeDestroy","timer","clearInterval","watch","_this","$nextTick","methods","rotateAngleX","Math","PI","rotateAngleY","_self","$refs","wrapper","onmousemove","e","pageX","offsetLeft","offsetWidth","pageY","offsetTop","offsetHeight","i","length","angleX","acos","angleY","sqrt","x","sin","cos","y","z","tag","style","round","random","ele","push","setInterval","rotateX","rotateY","setPosition","r","transform","opacity","fontSize","y1","z1","x1","dbclickTag","clickItem","item","$emit","tag_cloud_tag_cloud","render","_vm","_h","$createElement","_c","ref","staticClass","_l","index","key","refInFor","on","click","$event","dblclick","_v","_s","name","staticRenderFns","components_tag_cloud_tag_cloud","normalizeComponent","ssrContext","chatAI","mainHeight","inputContent","softHeight","statusBarHeight","marginBottom","chatMsgList","currentCategory","categoryList","hotTag","chatIcon","chatIcon_default","a","voiceToast","imgs","text","showToast","showVoice","showTag","inputWidth","window","innerWidth","brower","topHeight","_Native_heightChange","height","visibleHeight","scale","innerHeight","top","$el","marginTop","showEmotion","computedMainHeight","recorder","v1","button","_getTagCategory","_this2","autoTextarea","setTimeout","id","content","nickname","headUrl","AI_avatar_default","sendTime","Date","getTime","components","VHeader","v_header","Scroll","scroll_scroll","TagCloud","_this3","axiosApi","get","pageSize","_getHotTag","_this4","clickCategory","contentFocus","bottom","position","heightTimer","contentBlur","first","_this5","scrollIntoView","scrollIntoViewIfNeeded","clientHeight","time","scroll","refresh","scrollTo","maxScrollY","sendMessage","_this6","value","textarea","focus","user","local","default_avatar_default","info","loc","userid","params","promise_default","resolve","reject","axios_default","method","url","headers","Content-Type","then","res","console","log","code","Error","catch","$vux","toast","message","maxHeight","extra","elem","isFirefox","document","getBoxObjectFor","isOpera","opera","toString","indexOf","addEvent","callback","addEventListener","attachEvent","getStyle","currentStyle","val","search","rect","getBoundingClientRect","parseFloat","getComputedStyle","resize","change","padding","_length","parseInt","minHeight","scrollHeight","overflowY","currHeight","press","_this7","recordTimer","clearTimeout","startRecordTime","nativeBridge","recognizerVoice","str","volume","ceil","pan","distance","cancel","isFinal","stopRecognizerVoice","toggleInput","cancelRecognizerVoice","pressup","_this8","moment","diff","voice_to_short","clickTagItem","newVal","oldVal","_this9","forEach","sendTimeStr","format","speechVoice","stopSpeechVoice","chat_chatAI","attrs","title","fixed","staticStyle","directives","rawName","expression","overflow","msg","class","_e","domProps","innerHTML","active","display","aria-hidden","voiceInputActive","width","modifiers","trim","keyup","_k","keyCode","blur","$forceUpdate","input","target","composing","tagActive","img","src","chatAI_Component","chatAI_normalizeComponent","__webpack_exports__","v2","v3","v4","v5","v6","v7","loading"],"mappings":"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","file":"static/js/7.81b9098b578c7b39af6d.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/AI_avatar.05493f9.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/img/AI_avatar.png\n// module id = HKYh\n// module chunks = 7","//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  props: {\r\n    data: {\r\n      type: Array,\r\n      default: []\r\n    },\r\n    config: {\r\n      type: Object,\r\n      default: null\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      option: {\r\n        radius: 120,     // 滚动半径，单位px\r\n        maxFont: 24,    // 最大字体大小\r\n        color: null,   // 字体颜色。为空时随机\r\n        rotateAngleXbase: 600,  // 默认旋转速度基数，数越小速度越快\r\n        rotateAngleYbase: 600,\r\n        hover: true     // 是否开启悬浮联动\r\n      },\r\n      tagList: []\r\n    }\r\n  },\r\n  created () {\r\n    if (this.config != null) {\r\n      this.option = Object.assign({}, this.option, this.config)\r\n    }\r\n  },\r\n  mounted() {\r\n    this._initTags()\r\n  },\r\n  beforeDestroy() {\r\n    if (this.timer) {\r\n      clearInterval(this.timer)\r\n      this.timer = null\r\n    }\r\n  },\r\n  watch: {\r\n    data () {\r\n      this.$nextTick(() => {\r\n        this._initTags()\r\n      })\r\n    }\r\n  },\r\n  methods: {\r\n    _initTags() {\r\n      this.rotateAngleX = Math.PI / this.option.rotateAngleXbase\r\n      this.rotateAngleY = Math.PI / this.option.rotateAngleYbase\r\n      // 鼠标悬浮改变转速和方向\r\n      if (this.option.hover) {\r\n        const _self = this\r\n        this.$refs.wrapper.onmousemove = function (e) {\r\n          _self.rotateAngleY = (e.pageX - this.offsetLeft - this.offsetWidth / 2) / 10000\r\n          _self.rotateAngleX = -(e.pageY - this.offsetTop - this.offsetHeight / 2) / 10000\r\n        }\r\n      } else {\r\n        this.$refs.wrapper.onmousemove = null\r\n      }\r\n\r\n      for (var i = 0, length = this.data.length; i < length; i++) {\r\n        // 获取球面上均匀的点的经纬度 θ = arccos( ((2*num)-1)/all - 1); Φ = θ*sqrt(all * π);\r\n        let angleX = Math.acos((2 * (i + 1) - 1) / length - 1)\r\n        let angleY = angleX * Math.sqrt(length * Math.PI)\r\n        // 根据经纬度获取点的坐标，球中心的点坐标是 (0,0,0) x=r*sinθ*cosΦ   y=r*sinθ*sinΦ   z=r*cosθ;\r\n        const x = this.option.radius * Math.sin(angleX) * Math.cos(angleY)\r\n        const y = this.option.radius * Math.sin(angleX) * Math.sin(angleY)\r\n        const z = this.option.radius * Math.cos(angleX)\r\n        if (this.option.color) {\r\n          this.$refs.tag[i].style.color = this.option.color\r\n        } else {\r\n          // 随机颜色\r\n          this.$refs.tag[i].style.color = 'rgb(' + Math.round(255 * Math.random()) + ',' + Math.round(255 * Math.random()) + ',' + Math.round(255 * Math.random()) + ')'\r\n        }\r\n        // 每个标签对象都有四对值\r\n        var tag = {\r\n          x: x, y: y, z: z, ele: this.$refs.tag[i]\r\n        }\r\n        this.tagList.push(tag)\r\n      }\r\n      const _self = this\r\n      this.timer = setInterval(function () {\r\n        for (var i = 0; i < _self.tagList.length; i++) {\r\n          _self.rotateX(_self.tagList[i])\r\n          _self.rotateY(_self.tagList[i])\r\n          _self.setPosition(_self.tagList[i], _self.option.radius, _self.option.maxFont)\r\n        }\r\n      }, 20)\r\n    },\r\n    setPosition(tag, r, maxFont) {\r\n      // 设置每个标签的坐标位置和字体大小以及透明度\r\n      if (this.$refs.wrapper) {\r\n        tag.ele.style.transform = 'translate(' + (tag.x + this.$refs.wrapper.offsetWidth / 2 - tag.ele.offsetWidth / 2) + 'px,' + (tag.y + this.$refs.wrapper.offsetHeight / 2 - tag.ele.offsetHeight / 2) + 'px)'\r\n        tag.ele.style.opacity = tag.z / r / 2 + 0.7\r\n        tag.ele.style.fontSize = (tag.z / r / 2 + 0.5) * maxFont + 'px'\r\n      }\r\n    },\r\n    rotateX(tag) {\r\n      var cos = Math.cos(this.rotateAngleX)\r\n      var sin = Math.sin(this.rotateAngleX)\r\n      var y1 = tag.y * cos - tag.z * sin\r\n      var z1 = tag.y * sin + tag.z * cos\r\n      tag.y = y1\r\n      tag.z = z1\r\n    },\r\n    rotateY(tag) {\r\n      var cos = Math.cos(this.rotateAngleY)\r\n      var sin = Math.sin(this.rotateAngleY)\r\n      var x1 = tag.z * sin + tag.x * cos\r\n      var z1 = tag.z * cos - tag.x * sin\r\n      tag.x = x1\r\n      tag.z = z1\r\n    },\r\n    dbclickTag() {\r\n      if (this.timer) {\r\n        clearInterval(this.timer)\r\n        this.timer = null\r\n      } else {\r\n        const _self = this\r\n        this.timer = setInterval(function () {\r\n          for (var i = 0; i < _self.tagList.length; i++) {\r\n            _self.rotateX(_self.tagList[i])\r\n            _self.rotateY(_self.tagList[i])\r\n            _self.setPosition(_self.tagList[i], _self.option.radius, _self.option.maxFont)\r\n          }\r\n        }, 20)\r\n      }\r\n    },\r\n    clickItem (item) {\r\n      this.$emit('clickItem', item)\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/tag-cloud/tag-cloud.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"wrapper\",staticClass:\"tag-cloud\"},_vm._l((_vm.data),function(item,index){return _c('p',{key:index,ref:\"tag\",refInFor:true,on:{\"click\":function($event){_vm.clickItem(item)},\"dblclick\":function($event){_vm.dbclickTag(item)}}},[_vm._v(_vm._s(item.name))])}))}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-21699662\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tag-cloud/tag-cloud.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-21699662\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./tag-cloud.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./tag-cloud.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./tag-cloud.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-21699662\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./tag-cloud.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-21699662\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tag-cloud/tag-cloud.vue\n// module id = null\n// module chunks = ","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { localUser } from '@/assets/js/local'\r\nimport { isIOS, isIphoneX } from '@/assets/js/brower'\r\nimport chatIcon from '@/assets/json/chatIcon.json'\r\nimport NativeBridge from '@/assets/js/nativeBridge'\r\nimport chatAIApi from '@/api/chatAIApi'\r\nimport axios from '@/api/axiosApi'\r\n\r\nimport VHeader from '@/components/v-header/v-header'\r\nimport Scroll from '@/components/scroll/scroll'\r\nimport TagCloud from '@/components/tag-cloud/tag-cloud'\r\nimport AIAvatar from '@/assets/img/AI_avatar.png'\r\nimport defaultAvatar from '@/assets/img/default_avatar.png'\r\n\r\nexport default {\r\n  name: 'ChatAI',\r\n  data () {\r\n    return {\r\n      mainHeight: '',\r\n      inputContent: '',\r\n      softHeight: 0,   // 软键盘高度\r\n      statusBarHeight: 20,   // 状态栏高度\r\n      marginBottom: 0,\r\n      chatMsgList: [],\r\n      currentCategory: '',\r\n      categoryList: [],\r\n      hotTag: ['凯里市', '从江县', '台江县', '剑河县', '丹寨县', '榕江县', '施秉县', '镇原县'],    // 热门标签\r\n      chatIcon,\r\n      voiceToast: {\r\n        imgs: [],\r\n        text: ''\r\n      },\r\n      showToast: false,\r\n      showVoice: false,\r\n      showTag: false\r\n    }\r\n  },\r\n  created () {\r\n    this.inputWidth = window.innerWidth - 55 - 24 - 12\r\n    if (isIphoneX()) {\r\n      this.statusBarHeight = 44\r\n      this.marginBottom = 34\r\n      this.topHeight = 74\r\n    } else {\r\n      this.topHeight = 60\r\n    }\r\n    // 软键盘收缩监听\r\n    window._Native_heightChange = (height, visibleHeight) => {\r\n      // 软键盘的收缩导致的高度变化。Android与IOS同样处理\r\n      const scale = height / window.innerHeight // 1px在移动端所占像素点\r\n      if ((height - visibleHeight) / scale <= this.statusBarHeight) {\r\n        this.softHeight = 0\r\n        this.$refs.top.$el.style.marginTop = '0'\r\n        if (isIphoneX()) {\r\n          this.marginBottom = 34\r\n        }\r\n      } else {\r\n        this.marginBottom = 0\r\n        if (isIOS()) {\r\n          this.softHeight = (height - visibleHeight) / scale\r\n        } else {\r\n          this.softHeight = (height - visibleHeight) / scale - this.statusBarHeight\r\n        }\r\n        this.showEmotion = false\r\n      }\r\n      this.computedMainHeight()\r\n    }\r\n    this.voiceToast = {\r\n      imgs: [chatIcon.recorder, chatIcon.v1],\r\n      text: '手指上划，取消发送',\r\n      button: '按住  说话',\r\n      type: 'normal'\r\n    }\r\n\r\n    this._getTagCategory()\r\n  },\r\n  mounted() {\r\n    this.autoTextarea(90, 0)\r\n    setTimeout(() => {\r\n      this.$nextTick(() => {\r\n        this.computedMainHeight(true)\r\n      })\r\n    }, 300)\r\n\r\n    this.chatMsgList.push({\r\n      id: 'xiaohai',\r\n      type: 'from',\r\n      content: '我是小嗨，为您解决出行烦恼',\r\n      nickname: '小嗨',\r\n      headUrl: AIAvatar,\r\n      sendTime: new Date().getTime()\r\n    })\r\n  },\r\n  components: {\r\n    VHeader, Scroll, TagCloud\r\n  },\r\n  methods: {\r\n    _getTagCategory () {\r\n      axios.get(this, '/v1/intelligenceCategory', {\r\n        pageSize: 10\r\n      }, (data) => {\r\n        this.categoryList = data\r\n        this.currentCategory = data[0].id\r\n        this._getHotTag()\r\n      })\r\n    },\r\n    _getHotTag () {\r\n      axios.get(this, `/v1/intelligenceTag/${this.currentCategory}`, null, (data) => {\r\n        this.hotTag = data\r\n      })\r\n    },\r\n    clickCategory(id) {\r\n      this.currentCategory = id\r\n      this._getHotTag()\r\n    },\r\n    contentFocus (e) {\r\n      if (isIOS()) {\r\n        this.$refs.bottom.style.position = 'fixed'\r\n      }\r\n      const _self = this\r\n      // 实时计算高度\r\n      this.heightTimer = setInterval(() => {\r\n        _self.computedMainHeight()\r\n      }, 200)\r\n    },\r\n    contentBlur () {\r\n      clearInterval(this.heightTimer)\r\n    },\r\n    computedMainHeight(first) {\r\n      this.$refs.bottom.style.position = 'relative'\r\n      this.$refs.bottom.scrollIntoView()\r\n      this.$refs.bottom.scrollIntoViewIfNeeded()\r\n      this.$refs.bottom.style.bottom = '0'\r\n      this.mainHeight = window.innerHeight - this.$refs.top.$el.clientHeight - this.$refs.bottom.clientHeight - this.softHeight - this.marginBottom\r\n      let time = 300\r\n      if (first) {\r\n        time = 0\r\n      }\r\n      this.$nextTick(() => {\r\n        if (this.$refs.scroll) {\r\n          this.$refs.scroll.$el.style.marginTop = this.$refs.top.$el.clientHeight + 'px'\r\n          setTimeout(() => {\r\n            if (this.$refs.scroll) {\r\n              this.$refs.scroll.scroll.refresh()\r\n              this.$refs.scroll.scroll.scrollTo(0, this.$refs.scroll.scroll.maxScrollY, time)\r\n            }\r\n          }, time)\r\n        }\r\n      })\r\n    },\r\n    sendMessage () {\r\n      if (this.inputContent === '') {\r\n        return\r\n      }\r\n      const value = this.inputContent\r\n      this.inputContent = ''\r\n      this.$refs.textarea.focus()\r\n      let user = localUser.get()\r\n      if (user == null) user = {}\r\n      this.chatMsgList.push({\r\n        id: user.id || '',\r\n        type: 'to',\r\n        content: value,\r\n        nickname: user.nickname || '',\r\n        headUrl: user.headUrl || defaultAvatar,\r\n        sendTime: new Date().getTime()\r\n      })\r\n      // TODO 定位信息处理\r\n      const _self = this\r\n      chatAIApi(value, '', user.id || '').then((text) => {\r\n        _self.chatMsgList.push({\r\n          id: 'xiaohai',\r\n          type: 'from',\r\n          content: text,\r\n          nickname: '小嗨',\r\n          headUrl: AIAvatar,\r\n          sendTime: new Date().getTime()\r\n        })\r\n      }).catch((e) => {\r\n        this.$vux.toast.text(e.message, 'middle')\r\n      })\r\n    },\r\n    autoTextarea (maxHeight, extra) {\r\n      // textarea自适应高度\r\n      const elem = this.$refs.textarea\r\n      extra = extra || 0\r\n      const isFirefox = !!document.getBoxObjectFor || 'mozInnerScreenX' in window\r\n      const isOpera = !!window.opera && !!window.opera.toString().indexOf('Opera')\r\n      const addEvent = function (type, callback) {\r\n        elem.addEventListener ? elem.addEventListener(type, callback, false) : elem.attachEvent('on' + type, callback)\r\n      }\r\n      const getStyle = elem.currentStyle ? function (name) {\r\n        var val = elem.currentStyle[name]\r\n        if (name === 'height' && val.search(/px/i) !== 1) {\r\n          var rect = elem.getBoundingClientRect()\r\n          return rect.bottom - rect.top - parseFloat(getStyle('paddingTop')) - parseFloat(getStyle('paddingBottom')) + 'px'\r\n        }\r\n        return val\r\n      } : function (name) {\r\n        return getComputedStyle(elem, null)[name]\r\n      }\r\n      const minHeight = 40\r\n      elem.style.resize = 'none'\r\n      const change = function () {\r\n        let height\r\n        let padding = 0\r\n        let style = elem.style\r\n        if (elem._length === elem.value.length) return\r\n        elem._length = elem.value.length\r\n        if (!isFirefox && !isOpera) {\r\n          padding = parseInt(getStyle('paddingTop')) + parseInt(getStyle('paddingBottom'))\r\n        }\r\n\r\n        elem.style.height = minHeight + 'px'\r\n        if (elem.scrollHeight > minHeight) {\r\n          if (maxHeight && elem.scrollHeight > maxHeight) {\r\n            height = maxHeight - padding\r\n            style.overflowY = 'auto'\r\n          } else {\r\n            height = elem.scrollHeight - padding\r\n            style.overflowY = 'hidden'\r\n          };\r\n          style.height = height + extra + 'px'\r\n          elem.currHeight = parseInt(style.height)\r\n        }\r\n      }\r\n      addEvent('propertychange', change)\r\n      addEvent('input', change)\r\n      addEvent('focus', change)\r\n      change()\r\n    },\r\n    press () {\r\n      if (this.recordTimer) {\r\n        clearTimeout(this.recordTimer)\r\n        this.recordTimer = null\r\n      }\r\n      this.showToast = true\r\n      this.voiceToast = {\r\n        type: 'normal',\r\n        imgs: [chatIcon.recorder, chatIcon.v1],\r\n        text: '手指上划，取消发送',\r\n        button: '松开  结束'\r\n      }\r\n      this.startRecordTime = new Date()\r\n      NativeBridge.recognizerVoice((str) => {\r\n        this.inputContent += str\r\n        this.showVoice = false\r\n      }, (volume) => {\r\n        volume = Math.ceil((volume + 5) / 5)\r\n        if (this.showToast && (this.voiceToast.type === 'normal' || this.voiceToast.type === 'listen')) {\r\n          this.voiceToast = {\r\n            type: 'listen',\r\n            imgs: [chatIcon.recorder, chatIcon['v' + volume]],\r\n            text: '手指上划，取消发送',\r\n            button: '松开  结束'\r\n          }\r\n        }\r\n      })\r\n    },\r\n    pan (e) {\r\n      if (e.distance > 120) {\r\n        this.voiceToast = {\r\n          type: 'cancel',\r\n          imgs: [this.chatIcon.cancel],\r\n          text: '松开手指，取消发送',\r\n          button: '松开手指，取消发送'\r\n        }\r\n      } else {\r\n        this.voiceToast = {\r\n          type: 'listen',\r\n          imgs: [chatIcon.recorder, chatIcon.v1],\r\n          text: '手指上划，取消发送',\r\n          button: '松开  结束'\r\n        }\r\n      }\r\n      if (e.isFinal) {\r\n        this.showToast = false\r\n        if (e.distance <= 120) {\r\n          this.sendMessage()\r\n          NativeBridge.stopRecognizerVoice()\r\n          this.toggleInput()\r\n        } else {\r\n          // 取消发送\r\n          NativeBridge.cancelRecognizerVoice()\r\n        }\r\n        this.voiceToast = {\r\n          type: 'normal',\r\n          imgs: [chatIcon.recorder, chatIcon.v1],\r\n          text: '手指上划，取消发送',\r\n          button: '按住  说话'\r\n        }\r\n      }\r\n    },\r\n    pressup () {\r\n      if (this.moment().diff(this.moment(this.startRecordTime)) < 1000) {\r\n        this.voiceToast = {\r\n          type: 'tooShort',\r\n          imgs: [chatIcon.voice_to_short],\r\n          text: '录制时间太短',\r\n          button: '松开  结束'\r\n        }\r\n        this.recordTimer = setTimeout(() => {\r\n          this.showToast = false\r\n          this.voiceToast = {\r\n            type: 'normal',\r\n            imgs: [chatIcon.recorder, chatIcon.v1],\r\n            text: '手指上划，取消发送',\r\n            button: '按住  说话'\r\n          }\r\n        }, 1000)\r\n      } else {\r\n        NativeBridge.stopRecognizerVoice()\r\n        this.sendMessage()\r\n        this.showToast = false\r\n        this.voiceToast = {\r\n          type: 'normal',\r\n          imgs: [chatIcon.recorder, chatIcon.v1],\r\n          text: '手指上划，取消发送',\r\n          button: '按住  说话'\r\n        }\r\n        this.toggleInput()\r\n      }\r\n    },\r\n    toggleInput () {\r\n      this.showVoice = !this.showVoice\r\n      if (!this.showVoice) {\r\n        this.$refs.textarea.focus()\r\n      }\r\n    },\r\n    clickTagItem (tag) {\r\n      this.inputContent = tag.name\r\n      this.showTag = false\r\n      this.sendMessage()\r\n    }\r\n  },\r\n  watch: {\r\n    chatMsgList (newVal, oldVal) {\r\n      // 处理时间\r\n      newVal.forEach((item, index) => {\r\n        if (this.moment().diff(this.moment(item.sendTime), 'days') <= 1) {\r\n          item.sendTimeStr = this.moment(item.sendTime).format('HH:mm')\r\n        } else {\r\n          item.sendTimeStr = this.moment(item.sendTime).format('YYYY-MM-DD HH:mm')\r\n        }\r\n        if (index > 0) {\r\n          if (this.moment(item.sendTime).diff(this.moment(newVal[index - 1].sendTime), 'minutes') < 4) {\r\n            item.sendTimeStr = ''\r\n          }\r\n        }\r\n      })\r\n      const item = newVal[newVal.length - 1]\r\n      if (item.type === 'from') {\r\n        NativeBridge.speechVoice(item.content)\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy () {\r\n    NativeBridge.stopSpeechVoice()\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chat/chatAI.vue","import axios from 'axios'\r\n\r\nconst URL = 'http://www.tuling123.com/openapi/api'\r\nconst key = '5ab30db5cd734e099b7e5687a33377e9'\r\n\r\nexport default function (info, loc, userid) {\r\n  const params = {\r\n    key,\r\n    info,\r\n    loc,\r\n    userid\r\n  }\r\n  return new Promise((resolve, reject) => {\r\n    axios({\r\n      method: 'POST',\r\n      url: URL,\r\n      params: params,\r\n      headers: {\r\n        'Content-Type': 'application/json; charset=utf-8'\r\n      }\r\n    }).then((res) => {\r\n      console.log(res)\r\n      // 暂时只处理文本类的数据，其他的视为错误\r\n      if (res.data.code === 100000) {\r\n        resolve(res.data.text)\r\n      } else {\r\n        reject(new Error('不支持该格式的返回结果'))\r\n      }\r\n    })\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/chatAIApi.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chat-wrapper\"},[_c('v-header',{ref:\"top\",attrs:{\"title\":\"智能机器人\",\"fixed\":true}}),_vm._v(\" \"),_c('div',{staticStyle:{\"position\":\"relative\"},style:({height: _vm.mainHeight + 'px', marginTop: _vm.topHeight + 'px'})},[_c('scroll',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.showTag),expression:\"!showTag\"}],ref:\"scroll\",staticStyle:{\"overflow\":\"hidden\",\"height\":\"100%\"},attrs:{\"data\":_vm.chatMsgList}},[_c('ul',{staticClass:\"message\"},_vm._l((_vm.chatMsgList),function(msg,index){return _c('li',{key:index,class:msg.type},[(msg.sendTimeStr !== '')?_c('p',{staticClass:\"time\"},[_c('span',[_vm._v(_vm._s(msg.sendTimeStr))])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"main\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(msg.headUrl),expression:\"msg.headUrl\"}],staticClass:\"avatar\"}),_vm._v(\" \"),_c('div',{staticClass:\"text\",domProps:{\"innerHTML\":_vm._s(msg.content)}})])])}))]),_vm._v(\" \"),(_vm.showTag)?_c('div',{staticStyle:{\"position\":\"relative\",\"height\":\"100%\"}},[_c('tag-cloud',{attrs:{\"data\":_vm.hotTag},on:{\"clickItem\":_vm.clickTagItem}}),_vm._v(\" \"),_c('div',{staticClass:\"tags\"},_vm._l((_vm.categoryList),function(item){return _c('p',{key:item.id,class:{active: item.id === _vm.currentCategory},on:{\"click\":function($event){_vm.clickCategory(item.id)}}},[_vm._v(_vm._s(item.name))])}))],1):_vm._e()],1),_vm._v(\" \"),_c('div',{ref:\"bottom\",staticClass:\"bottom\"},[_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('div',{staticClass:\"icon\",on:{\"click\":_vm.toggleInput}},[_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.showVoice),expression:\"!showVoice\"}],staticClass:\"fa fa-microphone\",attrs:{\"aria-hidden\":\"true\"}}),_vm._v(\" \"),_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showVoice),expression:\"showVoice\"}],staticClass:\"fa fa-keyboard-o\",attrs:{\"aria-hidden\":\"true\"}})]),_vm._v(\" \"),_c('v-touch',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showVoice),expression:\"showVoice\"}],staticClass:\"voiceInput\",class:{voiceInputActive: _vm.voiceToast.type !== 'normal'},style:({width: _vm.inputWidth + 'px'}),on:{\"press\":_vm.press,\"pressup\":_vm.pressup,\"pan\":_vm.pan}},[_vm._v(_vm._s(_vm.voiceToast.button))]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.showVoice),expression:\"!showVoice\"},{name:\"model\",rawName:\"v-model.trim\",value:(_vm.inputContent),expression:\"inputContent\",modifiers:{\"trim\":true}}],ref:\"textarea\",staticClass:\"input\",style:({width: _vm.inputWidth + 'px'}),domProps:{\"value\":(_vm.inputContent)},on:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key)){ return null; }_vm.sendMessage($event)},\"focus\":_vm.contentFocus,\"blur\":[_vm.contentBlur,function($event){_vm.$forceUpdate()}],\"input\":function($event){if($event.target.composing){ return; }_vm.inputContent=$event.target.value.trim()}}}),_vm._v(\" \"),(_vm.inputContent != '')?_c('div',{staticClass:\"icon iconActive\",on:{\"click\":_vm.sendMessage}},[_c('i',{staticClass:\"fa fa-paper-plane-o\",attrs:{\"aria-hidden\":\"true\"}})]):_vm._e(),_vm._v(\" \"),(_vm.inputContent == '')?_c('div',{staticClass:\"icon\",on:{\"click\":function($event){_vm.showTag = !_vm.showTag}}},[_c('i',{staticClass:\"fa fa-bars\",class:{tagActive: _vm.showTag},attrs:{\"aria-hidden\":\"true\"}})]):_vm._e()],1)]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showToast),expression:\"showToast\"}],staticClass:\"toast\"},[_c('div',{staticClass:\"img\"},_vm._l((_vm.voiceToast.imgs),function(img,index){return _c('img',{key:index,attrs:{\"src\":img}})})),_vm._v(\" \"),_c('p',{class:{cancel: _vm.voiceToast.type === 'cancel'}},[_vm._v(_vm._s(_vm.voiceToast.text))])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-9e7444e2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/chat/chatAI.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9e7444e2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./chatAI.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./chatAI.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./chatAI.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9e7444e2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./chatAI.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-9e7444e2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/chat/chatAI.vue\n// module id = null\n// module chunks = ","module.exports = {\"recorder\":\"./static/img/chat/recorder.png\",\"v1\":\"./static/img/chat/v1.png\",\"v2\":\"./static/img/chat/v2.png\",\"v3\":\"./static/img/chat/v3.png\",\"v4\":\"./static/img/chat/v4.png\",\"v5\":\"./static/img/chat/v5.png\",\"v6\":\"./static/img/chat/v6.png\",\"v7\":\"./static/img/chat/v7.png\",\"cancel\":\"./static/img/chat/cancel.png\",\"voice_to_short\":\"./static/img/chat/voice_to_short.png\",\"loading\":\"./static/img/chat/loading.gif\"}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/json/chatIcon.json\n// module id = uhc6\n// module chunks = 7"],"sourceRoot":""}