webpackJsonp([17],{"3nQ5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABa0lEQVRYhe2XTZGFMAyAM9P0jgQkIAEJSHgScIAEJKQoQAISkICESsgemt0HM/toSmF72c7k0kPz5T8FkMNkXuxwZYeeHfKDMjPZHvaHHc4PK/1NFrHc9gWUByHbl7JexGzAzmzlANBD7gO5BmQAmI0JKiaocsKY44GRCVuecGDC9q8AfFBoGyaoDqVMUEtFJfWRFADPZDomqHjCgQ9Ny2wcGkwjIVnvByDbM9kmmnQTDgJxK8DCBLXaMrKNeOkmADIvmRXKcBnSekEL0LEzlJIvMmOiCakEgJpTa12ZjCqAYE1ixyPbaKD/ATQAPgNgvANgliTUKw8AvaZ04wATDqEMEwGUHTEG4LWx/By681KMAYxixSIPpUkYXqfhOwcgqH+Wjp3I+I3e7RaWj164tpAclxCfs5Rc34jIdG+rsY3F+n6At1xSvAd4+isWBVgKAqxlv2YTDt+f0xJemA+btXjiaRDPDtcwJ4LyLwy3BZoQbMAvAAAAAElFTkSuQmCC"},o1aL:function(t,e){},q0Eb:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),a=s.n(i),c=s("UBjx"),n=s("bh5B"),o=s("D8a4"),r=s("odqc"),l=s("Znkm"),v=s("fBcm"),d=s("b+jt"),g=s("Fwkz"),p=s("T452"),m=s("EdC7"),h=s.n(m),_=s("NYxO"),C=s("3nQ5"),u=s.n(C),f=s("KvKp"),A={name:"MessageList",data:function(){return{conversationList:[],listTab:["私信","通知"],swiperHeight:"500px",index:0,noticeImage:u.a}},components:{VHeader:c.a,Scroll:n.a,Badge:o.a,Tab:r.a,TabItem:l.a,Swiper:v.a,SwiperItem:d.a},created:function(){this._getConversationList()},mounted:function(){this.$refs.scroll.$el.style.height=window.innerHeight-this.$refs.scroll.offsetTop+"px",this.$refs.noticeScroll.$el.style.height=window.innerHeight-this.$refs.noticeScroll.offsetTop+"px",this.swiperHeight=window.innerHeight-40-44+"px"},computed:a()({},Object(_.b)(["syncConversation"]),Object(_.b)({selected:"messageTab"})),methods:a()({},Object(_.c)({setMessageTab:"SET_MESSAGE_TAB"}),{_getConversationList:function(){var t=this;this.$store.getters.JIM.getConversation().onSuccess(function(e){e.conversations.sort(function(t,e){return t.mtime<e.mtime});var s=[];e.conversations.forEach(function(e){var i={};i.id=e.username,i.nickname=e.nickName,i.unreadMsgCount=e.unread_msg_count>99?99:e.unread_msg_count,i.lastedMsg="",i.lastedMsgTime="",i.headUrl="",t.syncConversation.forEach(function(t){t.from_username===e.name&&t.msgs&&t.msgs.forEach(function(t,e){i.lastedMsg=t.content.msg_body.text,i.lastedMsgTime=Object(f.b)(t.content.create_time)})}),s.push(i),t._getAvatar(i.id)}),t.conversationList=s})},_getAvatar:function(t){var e=this;g.a.get(this,"/v1/userInfo/"+t,null,function(t){t.headUrl?t.headUrl.indexOf(p.f)>-1&&(t.headUrl+="-bheader"):t.headUrl=h.a,e.conversationList.forEach(function(e){e.id===t.id&&(e.headUrl=t.headUrl,e.nickname=t.nickname)})})},toChat:function(t){this.$store.dispatch("setChatObject",t),this.$router.push("/chat")},selectTabEvery:function(t){this.setMessageTab(t)}}),watch:{$route:function(t,e){"MessageList"===t.name&&this._getConversationList()}}},x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message-wrapper"},[s("v-header",{attrs:{title:"消息列表"}}),t._v(" "),s("div",{staticClass:"tabWrapper"},[s("div",[s("tab",{staticClass:"tabItem",attrs:{"line-width":2},model:{value:t.index,callback:function(e){t.index=e},expression:"index"}},t._l(t.listTab,function(e,i){return s("tab-item",{key:i,attrs:{selected:t.selected===i},on:{"on-item-click":t.selectTabEvery}},[t._v(t._s(e))])}))],1),t._v(" "),s("div",[s("swiper",{attrs:{height:t.swiperHeight,"show-dots":!1},model:{value:t.index,callback:function(e){t.index=e},expression:"index"}},[s("swiper-item",[s("scroll",{ref:"scroll",staticStyle:{overflow:"hidden"},attrs:{data:t.conversationList}},[s("ul",{staticClass:"message-list"},t._l(t.conversationList,function(e){return s("li",{key:e.id},[s("div",{staticClass:"message",on:{click:function(s){t.toChat(e)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.headUrl,expression:"con.headUrl"}],staticClass:"avator"}),t._v(" "),s("div",{staticClass:"content"},[s("h4",[t._v(t._s(e.nickname))]),t._v(" "),s("p",{domProps:{innerHTML:t._s(e.lastedMsg)}})]),t._v(" "),s("div",{staticClass:"right"},[s("p",{staticClass:"time"},[t._v(t._s(e.lastedMsgTime))]),t._v(" "),e.unreadMsgCount>0?s("badge",{attrs:{text:e.unreadMsgCount}}):t._e()],1)])])}))])],1),t._v(" "),s("swiper-item",[s("scroll",{ref:"noticeScroll",staticStyle:{overflow:"hidden"}},[s("div",{staticClass:"noticeWrapper"},[s("div",{staticClass:"noticeIcon"},[s("img",{staticStyle:{width:"30px",height:"30px","margin-right":"8px"},attrs:{slot:"icon",src:t.noticeImage},slot:"icon"})]),t._v(" "),s("div",{staticClass:"noticeDesc"},[s("div",{staticClass:"noticeDescTitle"},[s("p",[t._v("小嗨好友动态")])]),t._v(" "),s("div",{staticClass:"noticeDescContext"},[s("p",[t._v("小嗨赵毅刚刚发布了一条位于贵阳的动态")])]),t._v(" "),s("div",{staticClass:"noticeDescClick"},[s("p",[t._v("点击立即查看>>>")])]),t._v(" "),s("div",{staticClass:"noticeDescTime"},[s("p",[t._v("22小时前")])])])]),t._v(" "),s("div",{staticClass:"noticeWrapper"},[s("div",{staticClass:"noticeIcon"},[s("img",{staticStyle:{width:"30px",height:"30px","margin-right":"8px"},attrs:{slot:"icon",src:t.noticeImage},slot:"icon"})]),t._v(" "),s("div",{staticClass:"noticeDesc"},[s("div",{staticClass:"noticeDescTitle"},[s("p",[t._v("有峰峰喜欢了你的嗡嗡")])]),t._v(" "),s("div",{staticClass:"noticeDescContext"},[s("p",[t._v("如果喜欢了你位于贵阳的嗡嗡“确认过眼神，遇见对的人”")])]),t._v(" "),s("div",{staticClass:"noticeDescClick"},[s("p",[t._v("点击立即查看>>>")])]),t._v(" "),s("div",{staticClass:"noticeDescTime"},[s("p",[t._v("22小时前")])])])]),t._v(" "),s("div",{staticClass:"noticeWrapper"},[s("div",{staticClass:"noticeIcon"},[s("img",{staticStyle:{width:"30px",height:"30px","margin-right":"8px"},attrs:{slot:"icon",src:t.noticeImage},slot:"icon"})]),t._v(" "),s("div",{staticClass:"noticeDesc"},[s("div",{staticClass:"noticeDescTitle"},[s("p",[t._v("有蜂蜂关注了你")])]),t._v(" "),s("div",{staticClass:"noticeDescContext"},[s("p",[t._v("GILI关注了你，TA的信息：成都，关注2136，粉丝2253")])]),t._v(" "),s("div",{staticClass:"noticeDescClick"},[s("p",[t._v("点击立即查看>>>")])]),t._v(" "),s("div",{staticClass:"noticeDescTime"},[s("p",[t._v("22小时前")])])])]),t._v(" "),s("div",{staticClass:"noticeWrapper"},[s("div",{staticClass:"noticeIcon"},[s("img",{staticStyle:{width:"30px",height:"30px","margin-right":"8px"},attrs:{slot:"icon",src:t.noticeImage},slot:"icon"})]),t._v(" "),s("div",{staticClass:"noticeDesc"},[s("div",{staticClass:"noticeDescTitle"},[s("p",[t._v("有蜂蜂“回答”了你发出的提问")])]),t._v(" "),s("div",{staticClass:"noticeDescContext"},[s("p",[t._v("GILI回答了你的提问“请问明天会下雨吗？”")])]),t._v(" "),s("div",{staticClass:"noticeDescClick"},[s("p",[t._v("点击立即查看>>>")])]),t._v(" "),s("div",{staticClass:"noticeDescTime"},[s("p",[t._v("22小时前")])])])]),t._v(" "),s("div",{staticClass:"noticeWrapper"},[s("div",{staticClass:"noticeIcon"},[s("img",{staticStyle:{width:"30px",height:"30px","margin-right":"8px"},attrs:{slot:"icon",src:t.noticeImage},slot:"icon"})]),t._v(" "),s("div",{staticClass:"noticeDesc"},[s("div",{staticClass:"noticeDescTitle"},[s("p",[t._v("小蜂")])]),t._v(" "),s("div",{staticClass:"noticeDescContext"},[s("p",[t._v("你的好友发布了一篇新游记，这是TA的第15篇大作，码字不易，快去看看吧")])]),t._v(" "),s("div",{staticClass:"noticeDescClick"},[s("p",[t._v("点击立即查看>>>")])]),t._v(" "),s("div",{staticClass:"noticeDescTime"},[s("p",[t._v("22小时前")])])])]),t._v(" "),s("div",{staticStyle:{height:"40px"}})])],1)],1)],1)])],1)},staticRenderFns:[]};var D=s("VU/8")(A,x,!1,function(t){s("o1aL")},"data-v-b80060da",null);e.default=D.exports}});
//# sourceMappingURL=17.8055e5837893eca8ab62.js.map