webpackJsonp([39],{HSUQ:function(t,e){},ePXo:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Dd8w"),i=s.n(a),o=s("rGqP"),n=s("UBjx"),r=s("Fwkz"),d=s("GyW3"),l=s("kMOI"),c=s("NC6I"),u=s.n(c),v=s("NYxO"),p=60,m={data:function(){return{clickBack:!1,title:"绑定手机号",phone:"",validateCode:"",validateName:"获取验证码",password:"",rePassword:"",submitPhone:!1}},components:{VHeader:n.a,Divider:o.a},methods:i()({beforeLeave:function(t){Object(d.b)()&&!this.clickBack&&(t.style.display="none")},setTimeDown:function(){if(0===p)return this.validateDisabled=!1,this.validateName="重新获取",void(p=60);this.validateDisabled=!0,this.validateName="重新发送("+p+")",p--;var t=this;setTimeout(function(){t.setTimeDown()},1e3)},getValidate:function(){if(!this.validateDisabled)if(/^1[34578]\d{9}$/.test(this.phone)){if(p>=60){var t=this;r.a.get(t,"/v1/sms/"+this.phone,null,function(e){t.$vux.toast.show("发送验证码成功","middle")})}this.setTimeDown()}else this.$vux.toast.text("手机号码格式不正确","middle")},blurPassword:function(t){/^([\d]|[\w]){6,16}$/.test(this.password)||(this.$vux.toast.text("密码长度过短或过长，或者有特殊符号","middle"),t.target.focus())},confirmPhone:function(){var t=this,e=l.b.get("openid");if(null!=e)if(/^1[34578]\d{9}$/.test(this.phone))if(6===this.validateCode.length){var s=this;r.a.post(s,"/v1/sms/"+this.phone+"/"+this.validateCode,null,function(){l.b.setItem("phoneNum",t.phone),r.a.post(s,"/v1/weChatBindPhone/"+e+"/"+t.phone,null,function(t){l.b.set(t),s.setLoginAnmation(""),s.$router.replace("/")},function(){s.submitPhone=!0,s.title="确认密码"})})}else this.$vux.toast.text("验证码格式不正确","middle");else this.$vux.toast.text("手机号码格式不正确","middle");else this.$vux.toast.text("微信号为空","middle")},confirmPassword:function(){var t=this;this.password!==this.rePassword&&this.$vux.toast.text("两次输入的密码不一致","middle");var e=l.b.get();e.password=this.password;var s=this;r.a.post(s,"/v1/weChatRegister",e,function(e){e.password=u()(s.password),l.b.set(e),t.setLoginAnmation(""),s.$router.replace("/"),s.$store.getters.JIM.register({username:e.id,password:s.password,is_md5:!0,nickname:s.nickname})})}},Object(v.c)({setLoginAnmation:"SET_LOGIN_ANMATION"}))},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide"},on:{"before-leave":t.beforeLeave}},[s("div",{staticClass:"bind-phone-wrapper"},[s("v-header",{attrs:{title:t.title},on:{back:function(e){t.clickBack=!0}}}),t._v(" "),t.submitPhone?s("div",{staticClass:"form"},[s("div",{staticClass:"around"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"请输入6~16位密码"},domProps:{value:t.password},on:{blur:t.blurPassword,input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"around"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.rePassword,expression:"rePassword"}],attrs:{type:"password",placeholder:"再次输入上面的密码"},domProps:{value:t.rePassword},on:{input:function(e){e.target.composing||(t.rePassword=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"around",staticStyle:{"background-color":"#b9b9b9",margin:"25px auto"}},[s("button",{staticClass:"btn",on:{click:t.confirmPassword}},[t._v("登录")])])]):s("div",{staticClass:"form"},[s("div",{staticClass:"around"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{pattern:"[0-9]*",placeholder:"输入手机号"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"around validate-code"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.validateCode,expression:"validateCode"}],attrs:{placeholder:"输入验证码"},domProps:{value:t.validateCode},on:{input:function(e){e.target.composing||(t.validateCode=e.target.value)}}}),t._v(" "),s("div",{staticClass:"code",on:{click:t.getValidate}},[t._v("\n          "+t._s(t.validateName)+"\n        ")])]),t._v(" "),s("div",{staticClass:"around",staticStyle:{"background-color":"#b9b9b9",margin:"25px auto"}},[s("button",{staticClass:"btn",on:{click:t.confirmPhone}},[t._v("下一步")])])])],1)])},staticRenderFns:[]};var f=s("VU/8")(m,h,!1,function(t){s("HSUQ")},"data-v-2f16c8f7",null);e.default=f.exports}});
//# sourceMappingURL=39.27ec49ca60a58b722c1e.js.map