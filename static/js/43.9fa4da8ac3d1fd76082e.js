webpackJsonp([43],{OLsL:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("UBjx"),s=i("bh5B"),n=i("e66H"),o=i("YxJB"),r=i("3Lt7"),c=i("ALGc"),l=i("rGqP"),m=i("EmH9"),d=i("aTeQ"),u=i("62KO"),h=i("EdC7"),v=i.n(h),p=i("8Y6E"),f=i("kMOI"),g=i("Fwkz"),x={props:{fontColor:{type:String,default:"#fff"}},data:function(){return{styles:{},imageTop:v.a,dataStar:5,agree:!0,atlas:[],reconmmenderObject:{environmentRate:4,serviceRate:4,facilityRate:4,sanitationRate:4},show:!1}},mounted:function(){this.styles.height=window.innerHeight-64+"px"},computed:{imageSize:function(){return(window.innerWidth-30)/3-10}},created:function(){this.user=f.b.get(),this.reconmmenderObject.recommend=1},methods:{publishDynamic:function(){this.$refs.selectImg.dispatchEvent(new MouseEvent("click"))},selectImg:function(t){var e=this;t.target.files.length>15?this.$vux.toast.text("最多只能选15张图片","middle"):Object(p.a)(this,t.target.files,function(i){var a=[];i.forEach(function(t){a.push(t.downloadPath)}),e.atlas=e.atlas.concat(a),t.target.value=""})},ifPublishRecommanded:function(){this.show=!0},publishRecommanded:function(){var t=this;if(this.reconmmenderObject.userId=this.user.id,this.reconmmenderObject.productId=this.$route.params.productId,this.reconmmenderObject.outTradeNo=sessionStorage.getItem("outTradeNo"),""!==this.reconmmenderObject.comment&&null!=this.reconmmenderObject.comment){if(this.atlas.length>0)for(var e=0;e<this.atlas.length;e++)this.reconmmenderObject.matchImgUrl=this.atlas[e]+";";this.agree?this.reconmmenderObject.anonymity=1:this.reconmmenderObject.anonymity=0,g.a.post(this,"/v1/productComment",this.reconmmenderObject,function(e){t.$router.push("/user/order"),t.$store.commit("SET_ORDER_TAB",2),t.$vux.toast.text("发布评论成功","middle")})}else this.$vux.toast.text("评论内容为空","middle")},back:function(){this.$router.go(-1)},onCancel:function(){},onConfirm:function(){this.publishRecommanded()}},components:{VHeader:a.a,Scroll:s.a,Rater:n.a,Flexbox:o.a,FlexboxItem:r.a,XTextarea:c.a,Divider:l.a,CheckIcon:m.a,XSwitch:d.a,Confirm:u.a}},b={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"publishanswer",style:{color:t.fontColor}},[i("v-header",{attrs:{title:"评论"}},[i("p",{attrs:{slot:"right"},on:{click:t.ifPublishRecommanded},slot:"right"},[t._v("发布")]),t._v(" "),i("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-left",staticStyle:{top:"5px"},style:{fill:t.fontColor},attrs:{slot:"left",type:"ios-arrow-left",size:"28",xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 512 512"},on:{click:t.back},slot:"left"},[i("path",{attrs:{d:"M352 115.4L331.3 96 160 256l171.3 160 20.7-19.3L201.5 256z"}})])]),t._v(" "),i("div",[i("scroll",{style:t.styles,attrs:{bounce:!1}},[i("div",[i("flexbox",{staticClass:"topWrapper"},[i("flexbox-item",{staticClass:"rightWrapper"},[i("div",[i("div",{staticClass:"flexTwo"},[i("p",[t._v("五星级酒店有哪些容易被忽略的免费服务？")])])])])],1),t._v(" "),i("divider",[t._v("评价内容")]),t._v(" "),i("div",{staticClass:"evlutionText"},[i("x-textarea",{attrs:{max:200,placeholder:"请亲愉快地描述评价吧"},model:{value:t.reconmmenderObject.comment,callback:function(e){t.$set(t.reconmmenderObject,"comment",e)},expression:"reconmmenderObject.comment"}})],1),t._v(" "),i("div",{staticClass:"photoWrapper"},[i("input",{ref:"selectImg",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",multiple:""},on:{change:t.selectImg}}),t._v(" "),i("div",{staticClass:"photoSmall",on:{click:t.publishDynamic}},[i("div",[i("img",{staticClass:"imageTops",attrs:{src:t.imageTop,alt:""}})]),t._v(" "),i("div",{staticClass:"photoText"},[i("p",[t._v("上传照片")])])]),t._v(" "),i("div",{staticClass:"nameWrapper"},[i("check-icon",{attrs:{value:t.agree},on:{"update:value":function(e){t.agree=e}}},[i("p",[t._v("匿名上传")])])],1),t._v(" "),i("div",{staticClass:"imgs"},t._l(t.atlas,function(e,a){return i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e+"-meitu3",expression:"img + '-meitu3'"}],key:a,style:{width:t.imageSize+"px",height:t.imageSize+"px"}})}))])],1)]),t._v(" "),i("div",{staticClass:"alertWrapperEvalution"},[i("confirm",{attrs:{title:"温馨提示"},on:{"on-cancel":t.onCancel,"on-confirm":t.onConfirm},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("p",{staticStyle:{"text-align":"center"}},[t._v("是否确认发布")])])],1)],1),t._v(" "),i("router-view")],1)},staticRenderFns:[]};var w=i("VU/8")(x,b,!1,function(t){i("sU3/")},"data-v-18d141e5",null);e.default=w.exports},"sU3/":function(t,e){}});
//# sourceMappingURL=43.9fa4da8ac3d1fd76082e.js.map