webpackJsonp([14],{"9Wyg":function(t,e){},A6Ol:function(t,e){},oAcx:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),a=s.n(i),r=s("UBjx"),o=s("EdC7"),l=s.n(o),n=s("odqc"),c=s("Znkm"),d=s("vtEK"),u=s("rGqP"),f=s("2sLL"),x=s("fBcm"),p=s("b+jt"),v=s("YxJB"),m=s("3Lt7"),h=s("62KO"),g=s("bh5B"),b=s("Fwkz"),y=s("kMOI"),_=s("NYxO"),S=s("PJh5"),C=s.n(S),k=s("75UI"),T={data:function(){return{imageTop:l.a,listOrder:["全部","待付款","已付款","已取消","已失效"],listOrders:[],index:0,scrollHeight:""}},mounted:function(){this.scrollHeight=window.innerHeight-64-44},created:function(){this.pageNum=1,this.pageSize=10,this.getWaitPayList(!0)},computed:a()({},Object(_.b)({selectTab:"orderTab"})),watch:{$route:function(t,e){"Order"===t.name&&(this.pageNum=1,this.getWaitPayList(!0))}},methods:a()({},Object(_.c)({setOrderTab:"SET_ORDER_TAB"}),{toOrderDesc:function(t){this.$router.push("/user/order/orderDesc/"+t)},getDaysByDateString:function(t,e){return Math.abs(C()(t).diff(C()(e),"days"))},getWaitPayList:function(t){var e=this,s="",i=y.b.get("id");if(null!=i){var a="";0===this.selectTab?s="":1===this.selectTab?(s=!1,a=0):2===this.selectTab?(s=!1,a=1):3===this.selectTab?(s=!1,a=2):4===this.selectTab&&(s=!0);b.a.get(this,"/v1/orders",{buyerId:i,orderStatus:a,pageNum:this.pageNum,pageSize:this.pageSize,expire:s},function(s){for(var i=0;i<s.length;i++){switch(0===s[i].type&&(s[i].liveNum=e.getDaysByDateString(s[i].effectiveDate.split("~")[0],s[i].effectiveDate.split("~")[1])),s[i].orderStatus){case 0:s[i].orderStatusDesc="待付款";break;case 1:s[i].orderStatusDesc="已付款";break;case 2:s[i].orderStatusDesc="已取消";break;case 3:s[i].orderStatusDesc="退款中";break;case 4:s[i].orderStatusDesc="已退款";break;case 5:s[i].orderStatusDesc="退款失败"}(C()().subtract(1,"days").isAfter(s[i].effectiveDate.split("~")[1])||C()().subtract(1,"days").isAfter(s[i].effectiveDate))&&(s[i].orderStatusDesc="已失效",s[i].expire=!0)}if(t)return e.listOrders=s,void e.$nextTick(function(){0===s.length||e.$refs.scroll.scroll.scrollTo(0,0)});0===s.length?(e.$vux.toast.text("没有更多数据了","middle"),e.$refs.scroll&&e.pageNum>1?e.$refs.scroll.hiddenPullUpLoad():e.$refs.scroll.hiddenPullDown()):e.pageNum>1?e.listOrders=e.listOrders.concat(s):e.listOrders=s})}},selectTabEvery:function(t){this.setOrderTab(t),this.pageNum=1,this.getWaitPayList(!0)},handleToEvaluation:function(t,e){sessionStorage.setItem("outTradeNo",e),this.$router.replace("/user/evalution/"+t)},toPay:function(t){var e=this;k.a.alipay(t,function(t){var s=t.arg,i=t.msg;9e3===s&&(e.$store.commit("SET_ORDER_TAB",2),e.getWaitPayList(!0)),e.$vux.toast.text(i,"middle")})},toCansel:function(t){var e=this;b.a.put(this,"/v1/order",{outTradeNo:t,orderStatus:2},function(t){e.$vux.toast.text("订单取消成功","middle"),e.getWaitPayList(!0)})},onPullingUp:function(){this.pageNum++,this.getWaitPayList()},onPullingDown:function(){this.pageNum=1,this.getWaitPayList()}}),components:{VHeader:r.a,Tab:n.a,TabItem:c.a,Sticky:d.a,Divider:u.a,XButton:f.a,Swiper:x.a,SwiperItem:p.a,Flexbox:v.a,FlexboxItem:m.a,Scroll:g.a,Confirm:h.a}},D={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"order-wrapper"},[s("v-header",{attrs:{title:"我的订单"}}),t._v(" "),s("div",[s("tab",{attrs:{animate:!1,"line-width":2,"active-color":"#FFA004"}},t._l(t.listOrder,function(e,i){return s("tab-item",{key:i,staticClass:"vux-center",attrs:{selected:t.selectTab===i},on:{"on-item-click":t.selectTabEvery}},[t._v(t._s(e))])})),t._v(" "),s("scroll",{ref:"scroll",staticStyle:{overflow:"hidden"},style:{height:t.scrollHeight+"px"},attrs:{data:t.listOrders,scrollbar:!1,pullDownRefresh:!0,pullUpLoad:!0},on:{pullingDown:t.onPullingDown,pullingUp:t.onPullingUp}},[s("div",{staticClass:"tab-swiper vux-center"},[s("ul",t._l(t.listOrders,function(e,i){return s("li",{key:i,on:{click:function(s){t.toOrderDesc(e.outTradeNo)}}},[s("flexbox",{staticClass:"orderflexbox",attrs:{gutter:0}},[s("flexbox-item",{attrs:{span:2/3}},[s("div",{staticClass:"flex-demo",staticStyle:{"margin-left":"10px"}},[s("i",{staticClass:"fa fa-envelope-open-o",attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[t._v("  ")]),s("span",[t._v(t._s(0==e.type?"酒店":"景区"))])])]),t._v(" "),s("flexbox-item",{attrs:{span:1/3}},[s("div",{staticClass:"flex-demo",staticStyle:{"text-align":"right","margin-right":"20px"}},[s("span",{staticClass:"orderspan",staticStyle:{"padding-right":"5px",color:"#FFA004"}},[t._v(t._s(e.orderStatusDesc))])])])],1),t._v(" "),s("hr",{staticClass:"orderhr"}),t._v(" "),s("flexbox",{staticClass:"orderflexbox",attrs:{gutter:0}},[s("flexbox-item",{staticStyle:{"margin-left":"20px"},attrs:{span:1/6}},[s("div",{staticClass:"flex-demo"},[s("img",{staticClass:"imageWrapper",attrs:{src:e.thumbUrl,alt:""}})])]),t._v(" "),s("flexbox-item",{attrs:{span:5/6}},[s("div",{staticClass:"flex-demo"},[s("flexbox",{staticClass:"orderflexbox",attrs:{gutter:0}},[s("flexbox-item",[s("div",{staticClass:"flex-demo",staticStyle:{"padding-left":"17px","padding-right":"20px"}},[s("span",{},[t._v(t._s(e.goodsName))])])])],1),t._v(" "),s("flexbox",{staticClass:"orderflexbox orderflexboxthird",attrs:{gutter:0}},[s("flexbox-item",{attrs:{span:4/6}},[s("div",{staticClass:"flex-demo",staticStyle:{"margin-left":"17px"}},[s("span",{staticClass:"ordersmall"},[t._v(t._s(e.effectiveDate))])])])],1),t._v(" "),0==e.type?s("flexbox",{staticClass:"orderflexbox orderflexboxthird",attrs:{gutter:0}},[s("flexbox-item",[s("div",{staticClass:"flex-demo-o"},[s("span",{staticClass:"ordersmall"},[e.liveNum?s("span",[t._v(t._s(e.liveNum)+"晚")]):t._e(),t._v(" "+t._s(e.productNum)+"间")])])])],1):t._e(),t._v(" "),1==e.type?s("flexbox",{staticClass:"orderflexbox orderflexboxthird",attrs:{gutter:0}},[s("flexbox-item",[s("div",{staticClass:"flex-demo-o"},[s("span",{staticClass:"ordersmall"},[t._v(t._s(e.productNum)+"张")])])])],1):t._e()],1)])],1),t._v(" "),s("hr",{staticClass:"orderhr"}),t._v(" "),s("flexbox",{staticClass:"orderflexbox orderflexboxthird",attrs:{gutter:0}},[s("flexbox-item",[s("div",{staticClass:"flex-demo",staticStyle:{"margin-left":"20px","margin-top":"18px","text-align":"left"}},[s("span",{staticClass:"totalAmount"},[t._v("¥"+t._s(e.totalAmount))])])]),t._v(" "),0==e.orderStatus&&1!=e.expire?s("flexbox-item",[s("div",{staticClass:"flex-demo",staticStyle:{"margin-right":"20px","margin-top":"18px","text-align":"right"}},[s("button",{staticClass:"cancelButton",on:{click:function(s){s.stopPropagation(),t.toCansel(e.outTradeNo)}}},[t._v("取消订单")]),t._v(" "),s("button",{staticClass:"payButton",on:{click:function(s){s.stopPropagation(),t.toPay(e.outTradeNo)}}},[t._v("立即支付")])])]):t._e()],1),t._v(" "),1==e.orderStatus&&"已付款"===e.orderStatusDesc?s("flexbox",{staticClass:"orderflexbox orderflexboxthird",attrs:{gutter:0}},[s("flexbox-item",[s("div",{staticClass:"flex-demo",staticStyle:{"margin-right":"20px","margin-top":"-23px","text-align":"right"}},[0===e.commentStatus?s("button",{staticClass:"evalutionButton",on:{click:function(s){s.stopPropagation(),t.handleToEvaluation(e.productId,e.outTradeNo)}}},[t._v("评价晒单")]):t._e(),t._v(" "),1===e.commentStatus?s("button",{staticClass:"isEvalutionButton",class:{disabledCustom:!0},attrs:{disabled:"false"}},[t._v("已评价")]):t._e()])])],1):t._e()],1)})),t._v(" "),0===t.listOrders.length?s("div",{staticStyle:{"text-align":"center","margin-top":"25%"},on:{click:function(e){t.getWaitPayList(!0)}}},[s("h4",[t._v("喔噢~，没有数据")]),t._v(" "),s("p",{staticStyle:{"margin-top":"7px"}},[t._v("点击刷新")])]):t._e()])])],1),t._v(" "),s("router-view")],1)},staticRenderFns:[]};var w=s("VU/8")(T,D,!1,function(t){s("A6Ol")},"data-v-31ff4bee",null);e.default=w.exports},vtEK:function(t,e,s){"use strict";var i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e.scrollBox||window,i=e.offset||0,a=!0===e.checkStickySupport||!1;"string"==typeof s&&(s=document.getElementById(s));var r=t.offsetTop-i;s.removeEventListener("scroll",s.e);var o,l=function(){return s===window?document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop:s.scrollTop},n=function(){l()>r?(t.style.top=i+"px",t.classList.add("vux-fixed")):t.classList.remove("vux-fixed")};if(a&&((o=window.navigator.userAgent.match(/(iPad|iPhone|iPod)\s+OS\s([\d_.]+)/))&&o[2]&&parseInt(o[2].replace(/_/g,"."),10)>=6||function(){for(var t=["","-webkit-","-ms-","-moz-","-o-"],e="",s=0;s<t.length;s++)e+="position:"+t[s]+"sticky";var i=document.createElement("div"),a=document.body;i.style.cssText="display:none"+e,a.appendChild(i);var r=/sticky/i.test(window.getComputedStyle(i).position);return a.removeChild(i),i=null,r}()))t.style.top=i+"px",t.classList.add("vux-sticky");else{if(t.classList.contains("vux-fixed"))l()<(r=function(t){for(var e=t.nextSibling;1!==e.nodeType;)e=e.nextSibling;return e.classList.contains("vux-sticky-fill")?e:t.parentNode}(t).offsetTop-i)&&t.classList.remove("vux-fixed");else r=t.offsetTop-i;s.e=n,s.addEventListener("scroll",n)}},a={name:"sticky",data:function(){return{initTimes:0}},created:function(){this.$vux&&this.$vux.bus&&this.$vux.bus.$on("vux:after-view-enter",this.bindSticky)},activated:function(){this.initTimes>0&&this.bindSticky(),this.initTimes++},mounted:function(){var t=this;this.$nextTick(function(){t.bindSticky()})},beforeDestroy:function(){this.$vux&&this.$vux.bus&&this.$vux.bus.$off("vux:after-view-enter",this.bindSticky)},methods:{bindSticky:function(){var t=this;this.$nextTick(function(){i(t.$el,{scrollBox:t.scrollBox,offset:t.offset,checkStickySupport:void 0===t.checkStickySupport||t.checkStickySupport})})}},props:["scrollBox","offset","checkStickySupport"]},r={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vux-sticky-box"},[this._t("default")],2)},staticRenderFns:[]};var o=s("VU/8")(a,r,!1,function(t){s("9Wyg")},null,null);e.a=o.exports}});
//# sourceMappingURL=14.4b03eac4c05894648bc2.js.map