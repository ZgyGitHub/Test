webpackJsonp([38],{"1tAf":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("aFK5"),a=s.n(i),o=s("UBjx"),n=s("XYix"),l=s("YxJB"),r=s("3Lt7"),c=s("62KO"),d=s("Msp2"),u=s("bh5B"),h=s("Fwkz"),p=s("GyW3"),m=s("kMOI"),f={data:function(){return{styles:{height:"0px"},browseList:[],user:{},showMap:!1,menusMap:{},showGaoDei:!1,latitude:"",longitude:"",address:"",showCancel:!0}},methods:{handleClickProductDesc:function(t,e){this.$router.push("/address/product/"+t+"/"+e)},getBrowseList:function(t){var e=this,s=m.b.get("id");h.a.get(this,"/v1/messageRecords/"+s,{pageNum:this.pageNum,pageSize:this.pageSize},function(s){s.length>0&&s.forEach(function(t){t.imgUrl=t.atlas.split(";")[0]}),t?e.browseList=s:0===s.length?(e.$vux.toast.text("没有更多数据了","middle"),e.$refs.scroll&&e.pageNum>0?e.$refs.scroll.hiddenPullUpLoad():e.$refs.scroll.hiddenPullDown()):e.pageNum>1?e.browseList=e.browseList.concat(s):e.browseList=s})},handleClickStar:function(t){var e=this,s=this.browseList.findIndex(function(e){return e.id===t});s>-1&&(this.browseList[s].collectionType=this.browseList[s].collectionType?0:1,h.a.put(this,"/v1/messageRecord",{id:t,collectionType:this.browseList[s].collectionType},function(t){1===e.browseList[s].collectionType?e.$vux.toast.text("收藏成功"):e.$vux.toast.text("取消收藏成功")}))},onPullingUp:function(){this.pageNum++,this.getBrowseList()},onPullingDown:function(){this.pageNum=1,this.getBrowseList()},goToMap:function(t,e,s){if(Object(p.b)())window.webkit.messageHandlers.NativeMethod.postMessage({methodName:"openMapNavi",latitude:t,longitude:e});else{if(this.menusMap=JSON.parse(window.android.isInstallByread()),null==this.menusMap||1===a()(this.menusMap).length)return this.showCancel=!1,void(this.showGaoDei=!0);"2"===this.menusMap.baiDu&&(this.menusMap.baiDu="百度地图"),"1"===this.menusMap.gaoDei&&(this.menusMap.gaoDei="高德地图"),"3"===this.menusMap.tenXun&&(this.menusMap.tenXun="腾讯地图"),this.showMap=!0,this.latitude=t,this.longitude=e,this.address=s}},handleClickMenu:function(t){"baiDu"===t?window.android.makeUpMap(this.latitude,this.longitude,this.address,2,1,""):"gaoDei"===t?window.android.makeUpMap(this.latitude,this.longitude,this.address,1,1,""):"tenXun"===t&&window.android.makeUpMap(this.latitude,this.longitude,this.address,3,1,"")},onCancelGaoDei:function(){},onConfirmGaoDei:function(){window.android.makeUpMap(this.latitude,this.longitude,this.address,0,1,"")}},components:{VHeader:o.a,Masker:n.a,Flexbox:l.a,FlexboxItem:r.a,Scroll:u.a,isIOS:p.b,isIphoneX:p.c,Confirm:c.a,Actionsheet:d.a},mounted:function(){this.styles.height=window.innerHeight-64+"px"},created:function(){this.pageNum=1,this.pageSize=10,this.getBrowseList(!0)}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"browse"},[s("v-header",{attrs:{title:"最近浏览"}}),t._v(" "),s("scroll",{ref:"scroll",style:t.styles,attrs:{data:t.browseList,scrollbar:!1,pullDownRefresh:!0,pullUpLoad:!0},on:{pullingDown:t.onPullingDown,pullingUp:t.onPullingUp}},[s("div",[t._l(t.browseList,function(e){return s("div",{key:e.id,staticClass:"collectiondiv",staticStyle:{margin:"10px",overflow:"hidden"},on:{click:function(s){t.handleClickProductDesc(e.targetId,e.type)}}},[s("masker",{staticStyle:{"border-radius":"2px"},attrs:{color:"F9C90C",opacity:0}},[s("div",{staticClass:"m-img",style:{backgroundImage:"url("+e.imgUrl+")"}}),t._v(" "),s("div",{staticClass:"m-title",attrs:{slot:"content"},slot:"content"},[s("p",[t._v(t._s(e.name)+t._s(e.title)+"\n                "),s("br"),t._v(" "),s("span",{staticClass:"m-time"},[t._v(t._s(e.createAt.substring(0,10)))])])])]),t._v(" "),s("div",{staticClass:"collTwo"},[s("flexbox",{staticClass:"orderflexbox",attrs:{gutter:0}},[s("flexbox-item",[s("div",{staticClass:"flex-demo-o"},[s("p",{staticClass:"nameWrapper"},[t._v(t._s(e.name))])])])],1),t._v(" "),s("hr",{staticClass:"orderhrtwo"}),t._v(" "),s("flexbox",{staticClass:"orderflexbox",attrs:{gutter:0}},[s("flexbox-item",{attrs:{span:5/6}},[s("div",{staticClass:"flex-demo-o"},[s("p",{staticClass:"collectiontext",on:{click:function(s){s.stopPropagation(),t.goToMap(e.latitude,e.longitude,e.address)}}},[s("i",{staticClass:"fa fa-map-marker",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(e.address))])])]),t._v(" "),s("flexbox-item",{attrs:{span:1/6}},[1==e.collectionType?s("div",{staticClass:"flex-demo-or"},[s("i",{staticClass:"fa fa-star",attrs:{"aria-hidden":"true"},on:{click:function(s){s.stopPropagation(),t.handleClickStar(e.id)}}})]):t._e(),t._v(" "),1!=e.collectionType?s("div",{staticClass:"flex-demo-or"},[s("i",{staticClass:"fa fa-star-o",attrs:{"aria-hidden":"true"},on:{click:function(s){s.stopPropagation(),t.handleClickStar(e.id)}}})]):t._e()])],1)],1)],1)}),t._v(" "),0===t.browseList.length?s("div",{staticStyle:{"text-align":"center","margin-top":"25%"},on:{click:function(e){t.getBrowseList()}}},[s("h4",[t._v("喔噢~，没有数据")]),t._v(" "),s("p",{staticStyle:{"margin-top":"7px"}},[t._v("点击刷新")])]):t._e(),t._v(" "),s("div",{staticClass:"bottomDiv"})],2)]),t._v(" "),s("actionsheet",{attrs:{menus:t.menusMap,"show-cancel":t.showCancel},on:{"on-click-menu":t.handleClickMenu},model:{value:t.showMap,callback:function(e){t.showMap=e},expression:"showMap"}}),t._v(" "),s("div",{staticClass:"alertWrapper"},[s("div",[s("confirm",{attrs:{title:"操作提示"},on:{"on-cancel":t.onCancelGaoDei,"on-confirm":t.onConfirmGaoDei},model:{value:t.showGaoDei,callback:function(e){t.showGaoDei=e},expression:"showGaoDei"}},[s("p",{staticStyle:{"text-align":"center"}},[t._v("您尚未安装常用地图，小嗨为您推荐安装高德地图")])])],1)])],1)},staticRenderFns:[]};var w=s("VU/8")(f,g,!1,function(t){s("6hD6")},"data-v-33b73503",null);e.default=w.exports},"6hD6":function(t,e){}});
//# sourceMappingURL=38.09d30efd792d22d21d79.js.map