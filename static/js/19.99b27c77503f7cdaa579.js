webpackJsonp([19],{HQJT:function(t,e){},uIuM:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),a=s.n(i),l=s("UBjx"),r=s("bh5B"),n=s("Fwkz"),o=s("NYxO"),c=s("kMOI"),u=s("GyW3"),h=s("EdC7"),d=s.n(h),p=s("Ds+w"),v=s.n(p),m=s("ZvpS"),f=s("odqc"),b=s("Znkm"),g={name:"timeline",props:{color:String,isShowIcon:{type:Boolean,default:!0}},methods:{setChildProps:function(){if(this.$children){var t=this.$children.length;this.$children.forEach(function(e,s){e.isLast=s===t-1,e.isFirst=0===s})}}}},y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vux-timeline"},[e("ul",[this._t("default")],2)])},staticRenderFns:[]};var _=s("VU/8")(g,y,!1,function(t){s("yKi7")},null,null).exports,S={name:"timeline-item",data:function(){return{isLast:!0,isFirst:!0,headStyle:{backgroundColor:this.$parent.color}}},mounted:function(){this.$parent.setChildProps()},beforeDestroy:function(){var t=this.$parent;this.$nextTick(function(){t.setChildProps()})},components:{Icon:s("oWtu").a},computed:{tailStyle:function(){return this.isLast?{display:"none",backgroundColor:this.$parent.color}:{display:"block",backgroundColor:this.$parent.color}}}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"vux-timeline-item"},[e("div",{class:["vux-timeline-item-color",{"vux-timeline-item-head":!this.isFirst,"vux-timeline-item-head-first":this.isFirst}],style:this.headStyle},[e("icon",{directives:[{name:"show",rawName:"v-show",value:this.isFirst&&this.$parent.isShowIcon,expression:"isFirst && $parent.isShowIcon"}],staticClass:"vux-timeline-item-checked",attrs:{type:"success_no_circle"}})],1),this._v(" "),e("div",{staticClass:"vux-timeline-item-tail",style:this.tailStyle}),this._v(" "),e("div",{staticClass:"vux-timeline-item-content"},[this._t("default")],2)])},staticRenderFns:[]},T=s("VU/8")(S,w,!1,null,null,null).exports,x=s("1DHf"),$=s("e66H"),C=s("fBcm"),k=s("b+jt"),I=s("+2ZX"),D=s.n(I),U={data:function(){return{imageTop:d.a,dingImage:v.a,answerImage:D.a,showHeaderBackground:!1,headUrl:"http://p0w4yb0aj.bkt.clouddn.com/background_my.jpg",followStatus:0,listTab:[],starNum:5,index:0,swiperHeight:"500px",scrollHeight:"",opacity:0,user:{},ifMe:!0,taDynamic:[],selectAtlas:[],travelList:[],strategyList:[],dynamicImgUrl:"http://p0w4yb0aj.bkt.clouddn.com/background_my.jpg",travelImgUrl:"http://p0w4yb0aj.bkt.clouddn.com/background_my.jpg",categaryImgUrl:"http://p0w4yb0aj.bkt.clouddn.com/background_my.jpg"}},components:{VHeader:l.a,Scroll:r.a,isIOS:u.b,isIphoneX:u.c,localUser:c.b,axios:n.a,Tab:f.a,TabItem:b.a,Timeline:_,TimelineItem:T,Cell:x.a,Rater:$.a,Swiper:C.a,SwiperItem:k.a,Previewer:m.a},mounted:function(){var t=this;this.swiperHeight=window.innerHeight-44-40+"px",setTimeout(function(){t.$refs.tabScroll.disable(),t.$refs.wrapperScroll.enable()},200)},created:function(){this.pageNum=1,this.pageSize=10,this.user=c.b.get()||{},this.user.headUrl=sessionStorage.getItem("headUrl"),this.user.id===this.$route.params.userId&&(this.ifMe=!1),this.paddingTop=40,Object(u.c)()?this.paddingTop+=40:this.paddingTop+=26,this.getTaDynamic(),this.handleGetTravel(0,this.user.id),this.handleGetStrategy(1,this.user.id),this.hangdleGetDynamicNum(this.user.id),this.hangleGetTravelNum(this.user.id,0),this.hangleGetStrategyNum(this.user.id,1),this.listTab=["动态","游记","攻略"]},computed:a()({},Object(o.b)({selected:"archivesTab"})),methods:a()({},Object(o.c)({setArchivesTab:"SET_ARCHIVES_TAB"}),{scrollWrapper:function(t,e){t.y<=-206?this.opacity=1:this.opacity=Math.abs(t.y/206),t.y<=-190?(this.$refs.wrapperScroll.scroll.enabled&&(this.$refs.wrapperScroll.scrollTo(0,-190),this.$refs.wrapperScroll.stopScroll(),this.$refs.wrapperScroll.disable()),this.$refs.tabScroll.enable(),this.$refs.tabThreeScroll.enable(),this.$refs.tabTravelScroll.enable()):(this.$refs.tabScroll.scroll.enabled&&(this.$refs.tabScroll.stopScroll(),this.$refs.tabScroll.disable(),this.$refs.tabThreeScroll.stopScroll(),this.$refs.tabThreeScroll.disable(),this.$refs.tabTravelScroll.stopScroll(),this.$refs.tabTravelScroll.disable()),this.$refs.wrapperScroll.enable())},scrollTab:function(t,e){t.y>=0?(this.$refs.tabScroll.disable(),this.$refs.wrapperScroll.enable()):(this.$refs.wrapperScroll.disable(),this.$refs.tabScroll.enable())},scrollTabTwo:function(t,e){t.y>=0?this.$refs.wrapperScroll.enable():this.$refs.wrapperScroll.disable()},scrollTabThree:function(t,e){t.y>=0?(this.$refs.tabThreeScroll.disable(),this.$refs.wrapperScroll.enable()):(this.$refs.wrapperScroll.disable(),this.$refs.tabThreeScroll.enable())},scrollTravelTab:function(t,e){t.y>=0?(this.$refs.tabTravelScroll.disable(),this.$refs.wrapperScroll.enable()):(this.$refs.wrapperScroll.disable(),this.$refs.tabTravelScroll.enable())},changeFollowStatus:function(t){var e=c.b.get("id");if(null!=e){if(!this.sendRequest)if(e!==t){var s=0===this.followStatus?1:0;this.followStatus=s,this.sendRequest=!0;var i=this;n.a.post(this,"/v1/follow/"+e+"/"+t+"/"+s,null,function(t){i.sendRequest=!1},null,!1)}else this.$vux.toast.text("自己不能关注自己！","middle")}else this.$vux.toast.text("请先登录！","middle")},sendMessage:function(){null!=c.b.get("id")?(this.$store.dispatch("setChatObject",this.user),this.$router.push("/chat")):this.$vux.toast.text("请先登录！","middle")},toFollow:function(){null!=c.b.get("id")?this.$router.push("/user/focus/"+this.$route.params.userId):this.$vux.toast.text("请先登录！","middle")},toFans:function(){null!=c.b.get("id")?this.$router.push("/user/fans/"+this.$route.params.userId):this.$vux.toast.text("请先登录！","middle")},selectTabEvery:function(t){this.setArchivesTab(t)},handleGoEvalutionDesc:function(){this.$router.push("/user/evalutionDesc")},handleGoQuestionAndAnswer:function(){this.$router.push("/user/questionandanswer")},myFocus:function(){this.$router.push("/user/focus/"+this.user.id)},myFans:function(){this.$router.push("/user/fans/"+this.user.id)},getTaDynamic:function(){var t=this;n.a.get(this,"/v1/dynamic",{publisher:this.user.id,pageNum:this.pageNum,pageSize:this.pageSize},function(e){0===e.length?(t.$vux.toast.text("没有更多数据了","middle"),t.$refs.tabScroll&&t.pageNum>1?t.$refs.tabScroll.hiddenPullUpLoad():t.$refs.tabScroll.hiddenPullDown()):t.pageNum>1?t.taDynamic=t.taDynamic.concat(e):t.taDynamic=e})},handleGetTravel:function(t,e){var s=this;n.a.get(this,"/v1/playStrategy",{articleType:t,publishUserId:e},function(t){s.travelList=t})},handleGetStrategy:function(t,e){var s=this;n.a.get(this,"/v1/playStrategy",{articleType:t,publishUserId:e},function(t){s.strategyList=t})},hangdleGetDynamicNum:function(t){var e=this;n.a.get(this,"/v1/dynamicCount",{publisher:t},function(t){e.listTab[0]="动态 "+t})},hangleGetTravelNum:function(t,e){var s=this;n.a.get(this,"/v1/playStrategyCount",{publishUserId:t,articleType:e},function(t){s.listTab[1]="游记 "+t})},hangleGetStrategyNum:function(t,e){var s=this;n.a.get(this,"/v1/playStrategyCount",{publishUserId:t,articleType:e},function(t){s.listTab[2]="攻略 "+t})},onPullingUp:function(){this.pageNum++,this.getTaDynamic()},onPullingDown:function(){this.pageNum=1,this.getTaDynamic()},clickImg:function(t,e){var s=this;this.$vux.loading.show({text:"加载中...",position:"absolute"});var i=[];t.forEach(function(t,e){i.push({src:t})}),this.selectAtlas=i,this.$nextTick(function(){s.$refs.previewer.show(e)})},preImgLoaded:function(){this.$vux.loading.hide()},handleDynamic:function(t){this.$router.push("/meiTu/dynamicDesc/"+t)},handlePublishDynamic:function(){this.$router.push("/meiTu/publishDynamic")},handlePublishTravel:function(){this.$router.push("/address/travelsEdit/0")},handlePublishCategary:function(){this.$router.push("/address/travelsEdit/1")}}),watch:{}},N={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:""}},[s("div",{staticClass:"archives"},[s("v-header",{ref:"head",attrs:{title:"个人主页",opacity:t.opacity,fixed:!0}}),t._v(" "),s("scroll",{ref:"wrapperScroll",staticStyle:{overflow:"hidden",height:"100%"},attrs:{bounce:!1,probeType:3,listenScroll:!0},on:{scroll:t.scrollWrapper}},[s("div",[s("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.headUrl,expression:"headUrl",arg:"background-image"}],ref:"top",staticClass:"top"},[s("div",{staticClass:"wrapper",style:{paddingTop:t.paddingTop+"px"}},[s("div",{staticStyle:{display:"flex"}},[s("div",{staticClass:"head"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.user.headUrl||t.imageTop,expression:"user.headUrl || imageTop"}]})]),t._v(" "),s("div",{staticClass:"num"},[s("div",{staticClass:"item",on:{click:t.toFollow}},[s("p",[t._v("关注")]),t._v(" "),s("p",[t._v(t._s(t.user.followingCount))])]),t._v(" "),s("div",{staticClass:"diliver"}),t._v(" "),s("div",{staticClass:"item",on:{click:t.toFans}},[s("p",[t._v("粉丝")]),t._v(" "),s("p",[t._v(t._s(t.user.followerCount))])])])]),t._v(" "),s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("div",{staticClass:"nickname",staticStyle:{"max-width":"50%"}},[s("p",{staticStyle:{"font-size":"16px","margin-top":"9px"}},[t._v(t._s(t.user.nickname||"会员"+t.user.phoneNum))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.ifMe,expression:"ifMe"}],staticClass:"btn"},[s("div",{staticClass:"litter-button",on:{click:t.sendMessage}},[t._v("发私信")]),t._v(" "),1!=t.followStatus?s("div",{staticClass:"litter-button",on:{click:function(e){e.stopPropagation(),t.changeFollowStatus(t.user.id)}}},[s("i",{staticClass:"fa fa-plus",staticStyle:{"margin-right":"2px"},attrs:{"aria-hidden":"true"}}),t._v("关注")]):t._e(),t._v(" "),1==t.followStatus?s("div",{staticClass:"litter-button",staticStyle:{color:"#8492A6","border-color":"#8492A6"},on:{click:function(e){e.stopPropagation(),t.changeFollowStatus(t.user.id)}}},[t._v("已关注")]):t._e()])]),t._v(" "),s("p",{staticStyle:{"font-size":"12px","margin-top":"15px"}},[t._v(t._s(t.user.signature||"亲，你还没有个性签名，快去编辑自己的信息吧~"))])])]),t._v(" "),s("div",{staticClass:"tabWrapper"},[s("tab",{staticClass:"tabItem",attrs:{"line-width":2},model:{value:t.index,callback:function(e){t.index=e},expression:"index"}},t._l(t.listTab,function(e,i){return s("tab-item",{key:i,attrs:{selected:t.selected===i},on:{"on-item-click":t.selectTabEvery}},[t._v(t._s(e))])})),t._v(" "),s("div",[s("swiper",{attrs:{height:t.swiperHeight,"show-dots":!1},model:{value:t.index,callback:function(e){t.index=e},expression:"index"}},[s("swiper-item",[s("scroll",{ref:"tabScroll",staticStyle:{overflow:"hidden"},attrs:{listenScroll:!0,probeType:3,bounce:!0,data:t.taDynamic,scrollbar:!1,pullDownRefresh:!0,pullUpLoad:!0},on:{scroll:t.scrollTab,pullingDown:t.onPullingDown,pullingUp:t.onPullingUp}},[s("div",{staticClass:"travelWrapper"},[s("timeline",t._l(t.taDynamic,function(e){return s("timeline-item",{key:e.id,nativeOn:{click:function(s){t.handleDynamic(e.id)}}},[s("cell",{staticClass:"positionWrapper",attrs:{"is-link":""}},[s("span",{attrs:{slot:"title"},slot:"title"},[s("span",{staticClass:"yearWrapper"},[t._v(t._s(e.publishTime.substring(0,4))+"-")]),s("span",{staticClass:"monthWrapper"},[t._v(t._s(e.publishTime.substring(5,10)))])])]),t._v(" "),s("div",{staticClass:"momentsDesc"},[t._v("\n                                                  "+t._s(e.content)+"\n                                              ")]),t._v(" "),s("div",t._l(e.atlas.split(";"),function(i,a){return s("img",{key:i.index,staticStyle:{width:"90px",height:"90px"},attrs:{src:i,alt:""},on:{click:function(s){s.stopPropagation(),t.clickImg(e.atlas.split(";"),a)}}})})),t._v(" "),s("p",{staticClass:"recent"},[t._v(t._s(e.address))])],1)}))],1),t._v(" "),0===t.taDynamic.length?s("div",{staticStyle:{"text-align":"center","margin-top":"25%"},on:{click:function(e){t.getTaDynamic()}}},[s("h4",[t._v("喔噢~，没有数据")]),t._v(" "),s("p",{staticStyle:{"margin-top":"7px"}},[t._v("点击刷新")])]):t._e()])],1),t._v(" "),s("swiper-item",[s("scroll",{ref:"tabTravelScroll",staticStyle:{overflow:"hidden",height:"100%"},attrs:{listenScroll:!0,probeType:3,bounce:!1},on:{scroll:t.scrollTravelTab}},[t._l(t.travelList,function(e){return s("div",{key:e.id,staticClass:"travelTabWrapper"},[s("div",{staticClass:"travelTabTop"},[s("div",{staticClass:"travelTabTopLeft"},[s("p",[t._v(t._s(e.title))])]),t._v(" "),s("div",{staticClass:"travelTabTopRight"},[s("p",[t._v(t._s(e.userFollow))]),t._v(" "),s("img",{staticStyle:{width:"30px",height:"30px","margin-left":"8px"},attrs:{slot:"icon",src:t.dingImage},slot:"icon"})])]),t._v(" "),s("div",{staticClass:"travelInfo"},[s("div",{staticClass:"travelInfoLeft"},[s("div",{staticClass:"travelInfoLeftOne"},[s("img",{staticStyle:{width:"40px",height:"40px","border-radius":"50%"},attrs:{src:e.userHeadUrl,alt:""}})]),t._v(" "),s("div",{staticClass:"travelInfoLeftTwo"},[s("p",[t._v(t._s(!1===t.ifMe?"我":e.userName)+" 在"+t._s(e.addressName))])])]),t._v(" "),s("div",{staticClass:"travelInfoRight"},[s("div",{staticClass:"travelInfoRightOne"},[s("p",[t._v(t._s(e.browseCount)+"浏览")])]),t._v(" "),s("div",{staticClass:"travelInfoRightTwo"},[s("p",[t._v(t._s(e.commentCount)+"评论")])])])]),t._v(" "),s("div",{staticClass:"travelImage"},[s("img",{staticStyle:{width:"100%",height:"200px"},attrs:{src:e.firstImg,alt:""}})])])}),t._v(" "),s("div",{staticStyle:{height:"40px"}})],2)],1),t._v(" "),s("swiper-item",[s("scroll",{ref:"tabThreeScroll",staticStyle:{overflow:"hidden",height:"100%"},attrs:{listenScroll:!0,probeType:3,bounce:!1},on:{scroll:t.scrollTabThree}},[t._l(t.strategyList,function(e){return s("div",{key:e.id,staticClass:"strategyWrapper"},[s("div",{staticClass:"imgWrapper"},[s("img",{staticStyle:{width:"100%",height:"200px"},attrs:{src:e.firstImg,alt:""}})]),t._v(" "),s("div",{staticClass:"textWrapper"},[s("p",[t._v(t._s(e.title))])]),t._v(" "),s("div",{staticClass:"positionWrapper"},[s("p",[t._v(t._s(e.addressName))])]),t._v(" "),s("div",{staticClass:"bottomStrategy"},[s("div",{staticClass:"countWrapper"},[s("p",[t._v(t._s(e.browseCount)+"次浏览")])]),t._v(" "),s("div",{staticClass:"timeWrapper"},[s("p",[t._v(t._s(e.publishTime))])])])])}),t._v(" "),s("div",{staticStyle:{height:"30px",width:"100%"}})],2)],1)],1)],1)],1)])]),t._v(" "),s("div",[s("previewer",{ref:"previewer",attrs:{list:t.selectAtlas},on:{imgLoaded:t.preImgLoaded}})],1),t._v(" "),0===t.index?s("div",{staticClass:"dynamicPublish",staticStyle:{"border-radius":"50%"},style:{backgroundImage:"url("+t.dynamicImgUrl+")"},on:{click:t.handlePublishDynamic}}):t._e(),t._v(" "),1===t.index?s("div",{staticClass:"travelPublish",staticStyle:{"border-radius":"50%"},style:{backgroundImage:"url("+t.travelImgUrl+")"},on:{click:t.handlePublishTravel}}):t._e(),t._v(" "),2===t.index?s("div",{staticClass:"categaryPublish",staticStyle:{"border-radius":"50%"},style:{backgroundImage:"url("+t.categaryImgUrl+")"},on:{click:t.handlePublishCategary}}):t._e()],1)])},staticRenderFns:[]};var P=s("VU/8")(U,N,!1,function(t){s("HQJT")},"data-v-d4b3fc30",null);e.default=P.exports},yKi7:function(t,e){}});
//# sourceMappingURL=19.99b27c77503f7cdaa579.js.map